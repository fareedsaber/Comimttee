{"ast":null,"code":"/**\n * By https://github.com/TehShrike/deepmerge\n */\n\nvar isMergeableObject = function isMergeableObject(value) {\n  return isNonNullObject(value) && !isSpecial(value);\n};\nfunction isNonNullObject(value) {\n  return !!value && typeof value === 'object';\n}\nfunction isSpecial(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isNode(value) || isReactElement(value);\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\nfunction isReactElement(value) {\n  return value.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isNode(value) {\n  return value instanceof Node;\n}\nfunction emptyTarget(val) {\n  return Array.isArray(val) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;\n}\nfunction defaultArrayMerge(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified(element, options);\n  });\n}\nfunction getMergeFunction(key, options) {\n  if (!options.customMerge) {\n    return deepmerge;\n  }\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepmerge;\n}\nfunction getEnumerableOwnPropertySymbols(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return target.propertyIsEnumerable(symbol);\n  }) : [];\n}\nfunction getKeys(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\nfunction propertyIsOnObject(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\nfunction mergeObject(target, source, options) {\n  var destination = {};\n  if (options.isMergeableObject(target)) {\n    getKeys(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n    });\n  }\n  getKeys(source).forEach(function (key) {\n    if (propertyIsUnsafe(target, key)) {\n      return;\n    }\n    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n    }\n  });\n  return destination;\n}\nvar deepmerge = function deepmerge(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n  options.isMergeableObject = options.isMergeableObject || isMergeableObject;\n  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject(target, source, options);\n  }\n};\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\nvar getElement = function getElement(selector) {\n  if (typeof selector === 'object' && typeof selector.nodeType !== 'undefined') {\n    return selector;\n  }\n  if (typeof selector === 'string') {\n    return document.querySelector(selector);\n  }\n  return null;\n};\nvar createElement = function createElement(type, classes, content, html) {\n  if (html === void 0) {\n    html = false;\n  }\n  var el = document.createElement(type);\n  if (content) {\n    el[!html ? 'textContent' : 'innerHTML'] = content;\n  }\n  if (classes) {\n    el.className = classes;\n  }\n  return el;\n};\nvar findElement = function findElement(parentElement, selector) {\n  return Element.prototype.querySelector.call(parentElement, selector);\n};\nvar removeElement = function removeElement(target) {\n  target.parentNode.removeChild(target);\n};\nvar isImageUrl = function isImageUrl(url) {\n  return /\\.(jpg|gif|png)$/.test(url);\n};\nvar hyphenate = function hyphenate(string) {\n  return string.replace(/[\\w]([A-Z])/g, function (m) {\n    return m[0] + \"-\" + m[1];\n  }).toLowerCase();\n};\nvar merge = function merge(target, source, deep) {\n  if (deep === void 0) {\n    deep = false;\n  }\n  if (deep) {\n    return deepmerge(target, source);\n  }\n  return Object.assign(target, source);\n};\nvar getLineUid = function getLineUid(from, to) {\n  return from.toLowerCase() + \":to:\" + to.toLowerCase();\n};\nvar inherit = function inherit(target, source) {\n  Object.assign(target.prototype, source);\n};\nvar eventRegistry = {};\nvar eventUid = 1;\n\n/**\n * ------------------------------------------------------------------------\n * Event Handler\n * ------------------------------------------------------------------------\n */\nvar EventHandler = {\n  on: function on(element, event, handler, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var uid = \"jvm:\" + event + \"::\" + eventUid++;\n    eventRegistry[uid] = {\n      selector: element,\n      handler: handler\n    };\n    handler._uid = uid;\n    element.addEventListener(event, handler, options);\n  },\n  delegate: function delegate(element, event, selector, handler) {\n    event = event.split(' ');\n    event.forEach(function (eventName) {\n      EventHandler.on(element, eventName, function (e) {\n        var target = e.target;\n        if (target.matches(selector)) {\n          handler.call(target, e);\n        }\n      });\n    });\n  },\n  off: function off(element, event, handler) {\n    var eventType = event.split(':')[1];\n    element.removeEventListener(eventType, handler);\n    delete eventRegistry[handler._uid];\n  },\n  flush: function flush() {\n    Object.keys(eventRegistry).forEach(function (event) {\n      EventHandler.off(eventRegistry[event].selector, event, eventRegistry[event].handler);\n    });\n  },\n  getEventRegistry: function getEventRegistry() {\n    return eventRegistry;\n  }\n};\nfunction setupContainerEvents() {\n  var _this = this;\n  var map = this;\n  var mouseDown = false;\n  var oldPageX;\n  var oldPageY;\n  if (this.params.draggable) {\n    EventHandler.on(this.container, 'mousemove', function (e) {\n      if (!mouseDown) {\n        return false;\n      }\n      map.transX -= (oldPageX - e.pageX) / map.scale;\n      map.transY -= (oldPageY - e.pageY) / map.scale;\n      map._applyTransform();\n      oldPageX = e.pageX;\n      oldPageY = e.pageY;\n    });\n    EventHandler.on(this.container, 'mousedown', function (e) {\n      mouseDown = true;\n      oldPageX = e.pageX;\n      oldPageY = e.pageY;\n      return false;\n    });\n    EventHandler.on(document.body, 'mouseup', function () {\n      mouseDown = false;\n    });\n  }\n  if (this.params.zoomOnScroll) {\n    EventHandler.on(this.container, 'wheel', function (event) {\n      var deltaY = ((event.deltaY || -event.wheelDelta || event.detail) >> 10 || 1) * 75;\n      var rect = _this.container.getBoundingClientRect();\n      var offsetX = event.pageX - rect.left - window.pageXOffset;\n      var offsetY = event.pageY - rect.top - window.pageYOffset;\n      var zoomStep = Math.pow(1 + map.params.zoomOnScrollSpeed / 1000, -1.5 * deltaY);\n      if (map.tooltip) {\n        map._tooltip.hide();\n      }\n      map._setScale(map.scale * zoomStep, offsetX, offsetY);\n      event.preventDefault();\n    });\n  }\n}\nvar Events = {\n  onLoaded: 'map:loaded',\n  onViewportChange: 'viewport:changed',\n  onRegionClick: 'region:clicked',\n  onMarkerClick: 'marker:clicked',\n  onRegionSelected: 'region:selected',\n  onMarkerSelected: 'marker:selected',\n  onRegionTooltipShow: 'region.tooltip:show',\n  onMarkerTooltipShow: 'marker.tooltip:show',\n  onDestroyed: 'map:destroyed'\n};\nvar parseEvent = function parseEvent(map, selector, isTooltip) {\n  var element = getElement(selector);\n  var type = element.getAttribute('class').indexOf('jvm-region') === -1 ? 'marker' : 'region';\n  var isRegion = type === 'region';\n  var code = isRegion ? element.getAttribute('data-code') : element.getAttribute('data-index');\n  var event = isRegion ? Events.onRegionSelected : Events.onMarkerSelected;\n\n  // Init tooltip event\n  if (isTooltip) {\n    event = isRegion ? Events.onRegionTooltipShow : Events.onMarkerTooltipShow;\n  }\n  return {\n    type: type,\n    code: code,\n    event: event,\n    element: isRegion ? map.regions[code].element : map._markers[code].element,\n    tooltipText: isRegion ? map._mapData.paths[code].name || '' : map._markers[code].config.name || ''\n  };\n};\nfunction setupElementEvents() {\n  var map = this;\n  var container = this.container;\n  var pageX, pageY, mouseMoved;\n  EventHandler.on(container, 'mousemove', function (event) {\n    if (Math.abs(pageX - event.pageX) + Math.abs(pageY - event.pageY) > 2) {\n      mouseMoved = true;\n    }\n  });\n\n  // When the mouse is pressed\n  EventHandler.delegate(container, 'mousedown', '.jvm-element', function (event) {\n    pageX = event.pageX;\n    pageY = event.pageY;\n    mouseMoved = false;\n  });\n\n  // When the mouse is over the region/marker | When the mouse is out the region/marker\n  EventHandler.delegate(container, 'mouseover mouseout', '.jvm-element', function (event) {\n    var data = parseEvent(map, this, true);\n    var showTooltip = map.params.showTooltip;\n    if (event.type === 'mouseover') {\n      data.element.hover(true);\n      if (showTooltip) {\n        map._tooltip.text(data.tooltipText);\n        map._tooltip.show();\n        map._emit(data.event, [event, map._tooltip, data.code]);\n      }\n    } else {\n      data.element.hover(false);\n      if (showTooltip) {\n        map._tooltip.hide();\n      }\n    }\n  });\n\n  // When the click is released\n  EventHandler.delegate(container, 'mouseup', '.jvm-element', function (event) {\n    var data = parseEvent(map, this);\n    if (mouseMoved) {\n      return;\n    }\n    if (data.type === 'region' && map.params.regionsSelectable || data.type === 'marker' && map.params.markersSelectable) {\n      var element = data.element;\n\n      // We're checking if regions/markers|SelectableOne option is presented\n      if (map.params[data.type + \"sSelectableOne\"]) {\n        map._clearSelected(data.type + \"s\");\n      }\n      if (data.element.isSelected) {\n        element.select(false);\n      } else {\n        element.select(true);\n      }\n      map._emit(data.event, [data.code, element.isSelected, map._getSelected(data.type + \"s\")]);\n    }\n  });\n\n  // When region/marker is clicked\n  EventHandler.delegate(container, 'click', '.jvm-element', function (event) {\n    var _parseEvent = parseEvent(map, this),\n      type = _parseEvent.type,\n      code = _parseEvent.code;\n    map._emit(type === 'region' ? Events.onRegionClick : Events.onMarkerClick, [event, code]);\n  });\n}\nfunction setupZoomButtons() {\n  var _this = this;\n  var zoomin = createElement('div', 'jvm-zoom-btn jvm-zoomin', '&#43;', true);\n  var zoomout = createElement('div', 'jvm-zoom-btn jvm-zoomout', '&#x2212', true);\n  this.container.appendChild(zoomin);\n  this.container.appendChild(zoomout);\n  var handler = function handler(zoomin) {\n    if (zoomin === void 0) {\n      zoomin = true;\n    }\n    return function () {\n      return _this._setScale(zoomin ? _this.scale * _this.params.zoomStep : _this.scale / _this.params.zoomStep, _this._width / 2, _this._height / 2, false, _this.params.zoomAnimate);\n    };\n  };\n  EventHandler.on(zoomin, 'click', handler());\n  EventHandler.on(zoomout, 'click', handler(false));\n}\nfunction setupContainerTouchEvents() {\n  var map = this,\n    touchStartScale,\n    touchStartDistance,\n    touchX,\n    touchY,\n    centerTouchX,\n    centerTouchY,\n    lastTouchesLength;\n  var handleTouchEvent = function handleTouchEvent(e) {\n    var touches = e.touches;\n    var offset, scale, transXOld, transYOld;\n    if (e.type == 'touchstart') {\n      lastTouchesLength = 0;\n    }\n    if (touches.length == 1) {\n      if (lastTouchesLength == 1) {\n        transXOld = map.transX;\n        transYOld = map.transY;\n        map.transX -= (touchX - touches[0].pageX) / map.scale;\n        map.transY -= (touchY - touches[0].pageY) / map.scale;\n        map._tooltip.hide();\n        map._applyTransform();\n        if (transXOld != map.transX || transYOld != map.transY) {\n          e.preventDefault();\n        }\n      }\n      touchX = touches[0].pageX;\n      touchY = touches[0].pageY;\n    } else if (touches.length == 2) {\n      if (lastTouchesLength == 2) {\n        scale = Math.sqrt(Math.pow(touches[0].pageX - touches[1].pageX, 2) + Math.pow(touches[0].pageY - touches[1].pageY, 2)) / touchStartDistance;\n        map._setScale(touchStartScale * scale, centerTouchX, centerTouchY);\n        map._tooltip.hide();\n        e.preventDefault();\n      } else {\n        var rect = map.container.getBoundingClientRect();\n        offset = {\n          top: rect.top + window.scrollY,\n          left: rect.left + window.scrollX\n        };\n        if (touches[0].pageX > touches[1].pageX) {\n          centerTouchX = touches[1].pageX + (touches[0].pageX - touches[1].pageX) / 2;\n        } else {\n          centerTouchX = touches[0].pageX + (touches[1].pageX - touches[0].pageX) / 2;\n        }\n        if (touches[0].pageY > touches[1].pageY) {\n          centerTouchY = touches[1].pageY + (touches[0].pageY - touches[1].pageY) / 2;\n        } else {\n          centerTouchY = touches[0].pageY + (touches[1].pageY - touches[0].pageY) / 2;\n        }\n        centerTouchX -= offset.left;\n        centerTouchY -= offset.top;\n        touchStartScale = map.scale;\n        touchStartDistance = Math.sqrt(Math.pow(touches[0].pageX - touches[1].pageX, 2) + Math.pow(touches[0].pageY - touches[1].pageY, 2));\n      }\n    }\n    lastTouchesLength = touches.length;\n  };\n  EventHandler.on(map.container, 'touchstart', handleTouchEvent);\n  EventHandler.on(map.container, 'touchmove', handleTouchEvent);\n}\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nfunction _createForOfIteratorHelperLoose(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (t) return (t = t.call(r)).next.bind(t);\n  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n    t && (r = t);\n    var o = 0;\n    return function () {\n      return o >= r.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: r[o++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o);\n}\nfunction _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar BaseComponent = /*#__PURE__*/function () {\n  function BaseComponent() {}\n  var _proto = BaseComponent.prototype;\n  _proto.dispose = function dispose() {\n    if (this._tooltip) {\n      removeElement(this._tooltip);\n    } else {\n      // @todo: move shape in base component in v2\n      this.shape.remove();\n    }\n    for (var _iterator = _createForOfIteratorHelperLoose(Object.getOwnPropertyNames(this)), _step; !(_step = _iterator()).done;) {\n      var propertyName = _step.value;\n      this[propertyName] = null;\n    }\n  };\n  return BaseComponent;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Interactable\n * ------------------------------------------------------------------------\n */\nvar Interactable = {\n  getLabelText: function getLabelText(key, label) {\n    if (!label) {\n      return;\n    }\n    if (typeof label.render === 'function') {\n      var params = [];\n\n      // Pass additional paramater (Marker config object) in case it's a Marker.\n      if (this.config && this.config.marker) {\n        params.push(this.config.marker);\n      }\n\n      // Becuase we need to add the key always at the end\n      params.push(key);\n      return label.render.apply(this, params);\n    }\n    return key;\n  },\n  getLabelOffsets: function getLabelOffsets(key, label) {\n    if (typeof label.offsets === 'function') {\n      return label.offsets(key);\n    }\n\n    // If offsets are an array of offsets e.g offsets: [ [0, 25], [10, 15] ]\n    if (Array.isArray(label.offsets)) {\n      return label.offsets[key];\n    }\n    return [0, 0];\n  },\n  setStyle: function setStyle(property, value) {\n    this.shape.setStyle(property, value);\n  },\n  remove: function remove() {\n    this.shape.remove();\n    if (this.label) this.label.remove();\n  },\n  hover: function hover(state) {\n    this._setStatus('isHovered', state);\n  },\n  select: function select(state) {\n    this._setStatus('isSelected', state);\n  },\n  // Private\n  _setStatus: function _setStatus(property, state) {\n    this.shape[property] = state;\n    this.shape.updateStyle();\n    this[property] = state;\n    if (this.label) {\n      this.label[property] = state;\n      this.label.updateStyle();\n    }\n  }\n};\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Region = /*#__PURE__*/function (_BaseComponent) {\n  function Region(_ref) {\n    var _this;\n    var map = _ref.map,\n      code = _ref.code,\n      path = _ref.path,\n      style = _ref.style,\n      label = _ref.label,\n      labelStyle = _ref.labelStyle,\n      labelsGroup = _ref.labelsGroup;\n    _this = _BaseComponent.call(this) || this;\n    _this._map = map;\n    _this.shape = _this._createRegion(path, code, style);\n    var text = _this.getLabelText(code, label);\n\n    // If label is passed and render function returns something \n    if (label && text) {\n      var bbox = _this.shape.getBBox();\n      var offsets = _this.getLabelOffsets(code, label);\n      _this.labelX = bbox.x + bbox.width / 2 + offsets[0];\n      _this.labelY = bbox.y + bbox.height / 2 + offsets[1];\n      _this.label = _this._map.canvas.createText({\n        text: text,\n        textAnchor: 'middle',\n        alignmentBaseline: 'central',\n        dataCode: code,\n        x: _this.labelX,\n        y: _this.labelY\n      }, labelStyle, labelsGroup);\n      _this.label.addClass('jvm-region jvm-element');\n    }\n    return _this;\n  }\n  _inheritsLoose(Region, _BaseComponent);\n  var _proto = Region.prototype;\n  _proto._createRegion = function _createRegion(path, code, style) {\n    path = this._map.canvas.createPath({\n      d: path,\n      dataCode: code\n    }, style);\n    path.addClass('jvm-region jvm-element');\n    return path;\n  };\n  _proto.updateLabelPosition = function updateLabelPosition() {\n    if (this.label) {\n      this.label.set({\n        x: this.labelX * this._map.scale + this._map.transX * this._map.scale,\n        y: this.labelY * this._map.scale + this._map.transY * this._map.scale\n      });\n    }\n  };\n  return Region;\n}(BaseComponent);\ninherit(Region, Interactable);\nfunction createRegions() {\n  this._regionLabelsGroup = this._regionLabelsGroup || this.canvas.createGroup('jvm-regions-labels-group');\n  for (var code in this._mapData.paths) {\n    var region = new Region({\n      map: this,\n      code: code,\n      path: this._mapData.paths[code].path,\n      style: merge({}, this.params.regionStyle),\n      labelStyle: this.params.regionLabelStyle,\n      labelsGroup: this._regionLabelsGroup,\n      label: this.params.labels && this.params.labels.regions\n    });\n    this.regions[code] = {\n      config: this._mapData.paths[code],\n      element: region\n    };\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Line = /*#__PURE__*/function (_BaseComponent) {\n  function Line(_ref) {\n    var _this;\n    var index = _ref.index,\n      map = _ref.map,\n      style = _ref.style,\n      x1 = _ref.x1,\n      y1 = _ref.y1,\n      x2 = _ref.x2,\n      y2 = _ref.y2,\n      group = _ref.group,\n      config = _ref.config;\n    _this = _BaseComponent.call(this) || this;\n    _this.config = config;\n    _this.shape = map.canvas.createLine({\n      x1: x1,\n      y1: y1,\n      x2: x2,\n      y2: y2,\n      dataIndex: index\n    }, style, group);\n    _this.shape.addClass('jvm-line');\n    return _this;\n  }\n  _inheritsLoose(Line, _BaseComponent);\n  var _proto = Line.prototype;\n  _proto.setStyle = function setStyle(property, value) {\n    this.shape.setStyle(property, value);\n  };\n  return Line;\n}(BaseComponent);\nfunction createLines(lines, markers, isRecentlyCreated) {\n  if (isRecentlyCreated === void 0) {\n    isRecentlyCreated = false;\n  }\n  var point1 = false,\n    point2 = false;\n\n  // Create group for holding lines\n  // we're checking if `linesGroup` exists or not becuase we may add lines\n  // after the map has loaded so we will append the futured lines to this group as well.\n  this.linesGroup = this.linesGroup || this.canvas.createGroup('jvm-lines-group');\n  for (var index in lines) {\n    var config = lines[index];\n    for (var mindex in markers) {\n      var markerConfig = isRecentlyCreated ? markers[mindex].config : markers[mindex];\n      if (markerConfig.name === config.from) {\n        point1 = this.getMarkerPosition(markerConfig);\n      }\n      if (markerConfig.name === config.to) {\n        point2 = this.getMarkerPosition(markerConfig);\n      }\n    }\n    if (point1 !== false && point2 !== false) {\n      // Register lines with unique keys\n      this._lines[getLineUid(config.from, config.to)] = new Line({\n        index: index,\n        map: this,\n        // Merge the default `lineStyle` object with the custom `line` config style\n        style: merge({\n          initial: this.params.lineStyle\n        }, {\n          initial: config.style || {}\n        }, true),\n        x1: point1.x,\n        y1: point1.y,\n        x2: point2.x,\n        y2: point2.y,\n        group: this.linesGroup,\n        config: config\n      });\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Marker = /*#__PURE__*/function (_BaseComponent) {\n  function Marker(_ref) {\n    var _this;\n    var index = _ref.index,\n      style = _ref.style,\n      label = _ref.label,\n      cx = _ref.cx,\n      cy = _ref.cy,\n      map = _ref.map,\n      group = _ref.group;\n    _this = _BaseComponent.call(this) || this;\n\n    // Private\n    _this._map = map;\n    _this._isImage = !!style.initial.image;\n\n    // Protected\n    _this.config = arguments[0];\n    _this.shape = map.canvas[_this._isImage ? 'createImage' : 'createCircle']({\n      dataIndex: index,\n      cx: cx,\n      cy: cy\n    }, style, group);\n    _this.shape.addClass('jvm-marker jvm-element');\n    if (_this._isImage) {\n      _this.updateLabelPosition();\n    }\n    if (label) {\n      _this._createLabel(_this.config);\n    }\n    return _this;\n  }\n  _inheritsLoose(Marker, _BaseComponent);\n  var _proto = Marker.prototype;\n  _proto.updateLabelPosition = function updateLabelPosition() {\n    if (this.label) {\n      this.label.set({\n        x: this._labelX * this._map.scale + this._offsets[0] + this._map.transX * this._map.scale + 5 + (this._isImage ? (this.shape.width || 0) / 2 : this.shape.node.r.baseVal.value),\n        y: this._labelY * this._map.scale + this._map.transY * this._map.scale + this._offsets[1]\n      });\n    }\n  };\n  _proto._createLabel = function _createLabel(_ref2) {\n    var index = _ref2.index,\n      map = _ref2.map,\n      label = _ref2.label,\n      labelsGroup = _ref2.labelsGroup,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      marker = _ref2.marker,\n      isRecentlyCreated = _ref2.isRecentlyCreated;\n    var labelText = this.getLabelText(index, label);\n    this._labelX = cx / map.scale - map.transX;\n    this._labelY = cy / map.scale - map.transY;\n    this._offsets = isRecentlyCreated && marker.offsets ? marker.offsets : this.getLabelOffsets(index, label);\n    this.label = map.canvas.createText({\n      text: labelText,\n      dataIndex: index,\n      x: this._labelX,\n      y: this._labelY,\n      dy: '0.6ex'\n    }, map.params.markerLabelStyle, labelsGroup);\n    this.label.addClass('jvm-marker jvm-element');\n    if (isRecentlyCreated) {\n      this.updateLabelPosition();\n    }\n  };\n  return Marker;\n}(BaseComponent);\ninherit(Marker, Interactable);\nfunction createMarkers(markers, isRecentlyCreated) {\n  var _this = this;\n  if (markers === void 0) {\n    markers = {};\n  }\n  if (isRecentlyCreated === void 0) {\n    isRecentlyCreated = false;\n  }\n  // Create groups for holding markers and markers labels\n  // We're checking if `markersGroup` exists or not becuase we may add markers after the map has loaded\n  // So we will append the futured markers to this group as well.\n  this._markersGroup = this._markersGroup || this.canvas.createGroup('jvm-markers-group');\n  this._markerLabelsGroup = this._markerLabelsGroup || this.canvas.createGroup('jvm-markers-labels-group');\n  var _loop = function _loop() {\n      var config = markers[index];\n      var point = _this.getMarkerPosition(config);\n      var uid = config.coords.join(':');\n      if (!point) {\n        return 0; // continue\n      }\n\n      // We're checking if recently created marker does already exist\n      // If it does we don't need to create it again, so we'll continue\n      // Becuase we may have more than one marker submitted via `addMarkers` method.\n      if (isRecentlyCreated) {\n        if (Object.keys(_this._markers).filter(function (i) {\n          return _this._markers[i]._uid === uid;\n        }).length) {\n          return 0; // continue\n        }\n        index = Object.keys(_this._markers).length;\n      }\n      var marker = new Marker({\n        index: index,\n        map: _this,\n        // Merge the `markerStyle` object with the marker config `style` if presented.\n        style: merge(_this.params.markerStyle, _extends({}, config.style || {}), true),\n        label: _this.params.labels && _this.params.labels.markers,\n        labelsGroup: _this._markerLabelsGroup,\n        cx: point.x,\n        cy: point.y,\n        group: _this._markersGroup,\n        marker: config,\n        isRecentlyCreated: isRecentlyCreated\n      });\n\n      // Check for marker duplication\n      // this is useful when for example: a user clicks a button for creating marker two times\n      // so it will remove the old one and the new one will take its place.\n      if (_this._markers[index]) {\n        _this.removeMarkers([index]);\n      }\n      _this._markers[index] = {\n        _uid: uid,\n        config: config,\n        element: marker\n      };\n    },\n    _ret;\n  for (var index in markers) {\n    _ret = _loop();\n    if (_ret === 0) continue;\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Legend = /*#__PURE__*/function () {\n  function Legend(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this._options = options;\n    this._map = this._options.map;\n    this._series = this._options.series;\n    this._body = createElement('div', 'jvm-legend');\n    if (this._options.cssClass) {\n      this._body.setAttribute('class', this._options.cssClass);\n    }\n    if (options.vertical) {\n      this._map.legendVertical.appendChild(this._body);\n    } else {\n      this._map.legendHorizontal.appendChild(this._body);\n    }\n    this.render();\n  }\n  var _proto = Legend.prototype;\n  _proto.render = function render() {\n    var ticks = this._series.scale.getTicks();\n    var inner = createElement('div', 'jvm-legend-inner');\n    this._body.innderHTML = '';\n    if (this._options.title) {\n      var legendTitle = createElement('div', 'jvm-legend-title', this._options.title);\n      this._body.appendChild(legendTitle);\n    }\n    this._body.appendChild(inner);\n    for (var i = 0; i < ticks.length; i++) {\n      var tick = createElement('div', 'jvm-legend-tick');\n      var sample = createElement('div', 'jvm-legend-tick-sample');\n      switch (this._series.config.attribute) {\n        case 'fill':\n          if (isImageUrl(ticks[i].value)) {\n            sample.style.background = \"url(\" + ticks[i].value + \")\";\n          } else {\n            sample.style.background = ticks[i].value;\n          }\n          break;\n        case 'stroke':\n          sample.style.background = ticks[i].value;\n          break;\n        case 'image':\n          sample.style.background = \"url(\" + (typeof ticks[i].value === 'object' ? ticks[i].value.url : ticks[i].value) + \") no-repeat center center\";\n          sample.style.backgroundSize = 'cover';\n          break;\n      }\n      tick.appendChild(sample);\n      var label = ticks[i].label;\n      if (this._options.labelRender) {\n        label = this._options.labelRender(label);\n      }\n      var tickText = createElement('div', 'jvm-legend-tick-text', label);\n      tick.appendChild(tickText);\n      inner.appendChild(tick);\n    }\n  };\n  return Legend;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar OrdinalScale = /*#__PURE__*/function () {\n  function OrdinalScale(scale) {\n    this._scale = scale;\n  }\n  var _proto = OrdinalScale.prototype;\n  _proto.getValue = function getValue(value) {\n    return this._scale[value];\n  };\n  _proto.getTicks = function getTicks() {\n    var ticks = [];\n    for (var key in this._scale) {\n      ticks.push({\n        label: key,\n        value: this._scale[key]\n      });\n    }\n    return ticks;\n  };\n  return OrdinalScale;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Series = /*#__PURE__*/function () {\n  function Series(config, elements, map) {\n    if (config === void 0) {\n      config = {};\n    }\n    // Private\n    this._map = map;\n    this._elements = elements; // Could be markers or regions\n    this._values = config.values || {};\n\n    // Protected\n    this.config = config;\n    this.config.attribute = config.attribute || 'fill';\n\n    // Set initial attributes\n    if (config.attributes) {\n      this.setAttributes(config.attributes);\n    }\n    if (typeof config.scale === 'object') {\n      this.scale = new OrdinalScale(config.scale);\n    }\n    if (this.config.legend) {\n      this.legend = new Legend(merge({\n        map: this._map,\n        series: this\n      }, this.config.legend));\n    }\n    this.setValues(this._values);\n  }\n  var _proto = Series.prototype;\n  _proto.setValues = function setValues(values) {\n    var attrs = {};\n    for (var key in values) {\n      if (values[key]) {\n        attrs[key] = this.scale.getValue(values[key]);\n      }\n    }\n    this.setAttributes(attrs);\n  };\n  _proto.setAttributes = function setAttributes(attrs) {\n    for (var code in attrs) {\n      if (this._elements[code]) {\n        this._elements[code].element.setStyle(this.config.attribute, attrs[code]);\n      }\n    }\n  };\n  _proto.clear = function clear() {\n    var key,\n      attrs = {};\n    for (key in this._values) {\n      if (this._elements[key]) {\n        attrs[key] = this._elements[key].element.shape.style.initial[this.config.attribute];\n      }\n    }\n    this.setAttributes(attrs);\n    this._values = {};\n  };\n  return Series;\n}();\nfunction createSeries() {\n  this.series = {\n    markers: [],\n    regions: []\n  };\n  for (var key in this.params.series) {\n    for (var i = 0; i < this.params.series[key].length; i++) {\n      this.series[key][i] = new Series(this.params.series[key][i], key === 'markers' ? this._markers : this.regions, this);\n    }\n  }\n}\nfunction applyTransform() {\n  var maxTransX, maxTransY, minTransX, minTransY;\n  if (this._defaultWidth * this.scale <= this._width) {\n    maxTransX = (this._width - this._defaultWidth * this.scale) / (2 * this.scale);\n    minTransX = (this._width - this._defaultWidth * this.scale) / (2 * this.scale);\n  } else {\n    maxTransX = 0;\n    minTransX = (this._width - this._defaultWidth * this.scale) / this.scale;\n  }\n  if (this._defaultHeight * this.scale <= this._height) {\n    maxTransY = (this._height - this._defaultHeight * this.scale) / (2 * this.scale);\n    minTransY = (this._height - this._defaultHeight * this.scale) / (2 * this.scale);\n  } else {\n    maxTransY = 0;\n    minTransY = (this._height - this._defaultHeight * this.scale) / this.scale;\n  }\n  if (this.transY > maxTransY) {\n    this.transY = maxTransY;\n  } else if (this.transY < minTransY) {\n    this.transY = minTransY;\n  }\n  if (this.transX > maxTransX) {\n    this.transX = maxTransX;\n  } else if (this.transX < minTransX) {\n    this.transX = minTransX;\n  }\n  this.canvas.applyTransformParams(this.scale, this.transX, this.transY);\n  if (this._markers) {\n    this._repositionMarkers();\n  }\n  if (this._lines) {\n    this._repositionLines();\n  }\n  this._repositionLabels();\n}\nfunction resize() {\n  var curBaseScale = this._baseScale;\n  if (this._width / this._height > this._defaultWidth / this._defaultHeight) {\n    this._baseScale = this._height / this._defaultHeight;\n    this._baseTransX = Math.abs(this._width - this._defaultWidth * this._baseScale) / (2 * this._baseScale);\n  } else {\n    this._baseScale = this._width / this._defaultWidth;\n    this._baseTransY = Math.abs(this._height - this._defaultHeight * this._baseScale) / (2 * this._baseScale);\n  }\n  this.scale *= this._baseScale / curBaseScale;\n  this.transX *= this._baseScale / curBaseScale;\n  this.transY *= this._baseScale / curBaseScale;\n}\nfunction setScale(scale, anchorX, anchorY, isCentered, animate) {\n  var _this = this;\n  var zoomStep,\n    interval,\n    i = 0,\n    count = Math.abs(Math.round((scale - this.scale) * 60 / Math.max(scale, this.scale))),\n    scaleStart,\n    scaleDiff,\n    transXStart,\n    transXDiff,\n    transYStart,\n    transYDiff,\n    transX,\n    transY;\n  if (scale > this.params.zoomMax * this._baseScale) {\n    scale = this.params.zoomMax * this._baseScale;\n  } else if (scale < this.params.zoomMin * this._baseScale) {\n    scale = this.params.zoomMin * this._baseScale;\n  }\n  if (typeof anchorX != 'undefined' && typeof anchorY != 'undefined') {\n    zoomStep = scale / this.scale;\n    if (isCentered) {\n      transX = anchorX + this._defaultWidth * (this._width / (this._defaultWidth * scale)) / 2;\n      transY = anchorY + this._defaultHeight * (this._height / (this._defaultHeight * scale)) / 2;\n    } else {\n      transX = this.transX - (zoomStep - 1) / scale * anchorX;\n      transY = this.transY - (zoomStep - 1) / scale * anchorY;\n    }\n  }\n  if (animate && count > 0) {\n    scaleStart = this.scale;\n    scaleDiff = (scale - scaleStart) / count;\n    transXStart = this.transX * this.scale;\n    transYStart = this.transY * this.scale;\n    transXDiff = (transX * scale - transXStart) / count;\n    transYDiff = (transY * scale - transYStart) / count;\n    interval = setInterval(function () {\n      i += 1;\n      _this.scale = scaleStart + scaleDiff * i;\n      _this.transX = (transXStart + transXDiff * i) / _this.scale;\n      _this.transY = (transYStart + transYDiff * i) / _this.scale;\n      _this._applyTransform();\n      if (i == count) {\n        clearInterval(interval);\n        _this._emit(Events.onViewportChange, [_this.scale, _this.transX, _this.transY]);\n      }\n    }, 10);\n  } else {\n    this.transX = transX;\n    this.transY = transY;\n    this.scale = scale;\n    this._applyTransform();\n    this._emit(Events.onViewportChange, [this.scale, this.transX, this.transY]);\n  }\n}\nfunction setFocus(config) {\n  var _this = this;\n  if (config === void 0) {\n    config = {};\n  }\n  var bbox,\n    codes = [];\n  if (config.region) {\n    codes.push(config.region);\n  } else if (config.regions) {\n    codes = config.regions;\n  }\n  if (codes.length) {\n    codes.forEach(function (code) {\n      if (_this.regions[code]) {\n        var itemBbox = _this.regions[code].element.shape.getBBox();\n        if (itemBbox) {\n          // Handle the first loop\n          if (typeof bbox == 'undefined') {\n            bbox = itemBbox;\n          } else {\n            // get the old bbox properties plus the current\n            // this kinda incrementing the old values and the new values\n            bbox = {\n              x: Math.min(bbox.x, itemBbox.x),\n              y: Math.min(bbox.y, itemBbox.y),\n              width: Math.max(bbox.x + bbox.width, itemBbox.x + itemBbox.width) - Math.min(bbox.x, itemBbox.x),\n              height: Math.max(bbox.y + bbox.height, itemBbox.y + itemBbox.height) - Math.min(bbox.y, itemBbox.y)\n            };\n          }\n        }\n      }\n    });\n    return this._setScale(Math.min(this._width / bbox.width, this._height / bbox.height), -(bbox.x + bbox.width / 2), -(bbox.y + bbox.height / 2), true, config.animate);\n  } else if (config.coords) {\n    var point = this.coordsToPoint(config.coords[0], config.coords[1]);\n    var x = this.transX - point.x / this.scale;\n    var y = this.transY - point.y / this.scale;\n    return this._setScale(config.scale * this._baseScale, x, y, true, config.animate);\n  }\n}\nfunction updateSize() {\n  this._width = this.container.offsetWidth;\n  this._height = this.container.offsetHeight;\n  this._resize();\n  this.canvas.setSize(this._width, this._height);\n  this._applyTransform();\n}\n\n/**\n * ------------------------------------------------------------------------\n * Object\n * ------------------------------------------------------------------------\n */\nvar Proj = {\n  /* sgn(n){\n    if (n > 0) {\n      return 1;\n    } else if (n < 0) {\n      return -1;\n    } else {\n      return n;\n    }\n  }, */\n  mill: function mill(lat, lng, c) {\n    return {\n      x: this.radius * (lng - c) * this.radDeg,\n      y: -this.radius * Math.log(Math.tan((45 + 0.4 * lat) * this.radDeg)) / 0.8\n    };\n  },\n  /* mill_inv(x, y, c) {\n    return {\n      lat: (2.5 * Math.atan(Math.exp(0.8 * y / this.radius)) - 5 * Math.PI / 8) * this.degRad,\n      lng: (c * this.radDeg + x / this.radius) * this.degRad\n    };\n  }, */\n  merc: function merc(lat, lng, c) {\n    return {\n      x: this.radius * (lng - c) * this.radDeg,\n      y: -this.radius * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360))\n    };\n  },\n  /* merc_inv(x, y, c) {\n    return {\n      lat: (2 * Math.atan(Math.exp(y / this.radius)) - Math.PI / 2) * this.degRad,\n      lng: (c * this.radDeg + x / this.radius) * this.degRad\n    };\n  }, */\n  aea: function aea(lat, lng, c) {\n    var fi0 = 0,\n      lambda0 = c * this.radDeg,\n      fi1 = 29.5 * this.radDeg,\n      fi2 = 45.5 * this.radDeg,\n      fi = lat * this.radDeg,\n      lambda = lng * this.radDeg,\n      n = (Math.sin(fi1) + Math.sin(fi2)) / 2,\n      C = Math.cos(fi1) * Math.cos(fi1) + 2 * n * Math.sin(fi1),\n      theta = n * (lambda - lambda0),\n      ro = Math.sqrt(C - 2 * n * Math.sin(fi)) / n,\n      ro0 = Math.sqrt(C - 2 * n * Math.sin(fi0)) / n;\n    return {\n      x: ro * Math.sin(theta) * this.radius,\n      y: -(ro0 - ro * Math.cos(theta)) * this.radius\n    };\n  },\n  /* aea_inv(xCoord, yCoord, c) {\n    var x = xCoord / this.radius,\n        y = yCoord / this.radius,\n        fi0 = 0,\n        lambda0 = c * this.radDeg,\n        fi1 = 29.5 * this.radDeg,\n        fi2 = 45.5 * this.radDeg,\n        n = (Math.sin(fi1)+Math.sin(fi2)) / 2,\n        C = Math.cos(fi1)*Math.cos(fi1)+2*n*Math.sin(fi1),\n        ro0 = Math.sqrt(C-2*n*Math.sin(fi0))/n,\n        ro = Math.sqrt(x*x+(ro0-y)*(ro0-y)),\n        theta = Math.atan( x / (ro0 - y) );\n     return {\n      lat: (Math.asin((C - ro * ro * n * n) / (2 * n))) * this.degRad,\n      lng: (lambda0 + theta / n) * this.degRad\n    };\n  }, */\n  lcc: function lcc(lat, lng, c) {\n    var fi0 = 0,\n      lambda0 = c * this.radDeg,\n      lambda = lng * this.radDeg,\n      fi1 = 33 * this.radDeg,\n      fi2 = 45 * this.radDeg,\n      fi = lat * this.radDeg,\n      n = Math.log(Math.cos(fi1) * (1 / Math.cos(fi2))) / Math.log(Math.tan(Math.PI / 4 + fi2 / 2) * (1 / Math.tan(Math.PI / 4 + fi1 / 2))),\n      F = Math.cos(fi1) * Math.pow(Math.tan(Math.PI / 4 + fi1 / 2), n) / n,\n      ro = F * Math.pow(1 / Math.tan(Math.PI / 4 + fi / 2), n),\n      ro0 = F * Math.pow(1 / Math.tan(Math.PI / 4 + fi0 / 2), n);\n    return {\n      x: ro * Math.sin(n * (lambda - lambda0)) * this.radius,\n      y: -(ro0 - ro * Math.cos(n * (lambda - lambda0))) * this.radius\n    };\n  }\n  /* lcc_inv(xCoord, yCoord, c) {\n    var x = xCoord / this.radius,\n        y = yCoord / this.radius,\n        fi0 = 0,\n        lambda0 = c * this.radDeg,\n        fi1 = 33 * this.radDeg,\n        fi2 = 45 * this.radDeg,\n        n = Math.log( Math.cos(fi1) * (1 / Math.cos(fi2)) ) / Math.log( Math.tan( Math.PI / 4 + fi2 / 2) * (1 / Math.tan( Math.PI / 4 + fi1 / 2) ) ),\n        F = ( Math.cos(fi1) * Math.pow( Math.tan( Math.PI / 4 + fi1 / 2 ), n ) ) / n,\n        ro0 = F * Math.pow( 1 / Math.tan( Math.PI / 4 + fi0 / 2 ), n ),\n        ro = this.sgn(n) * Math.sqrt(x*x+(ro0-y)*(ro0-y)),\n        theta = Math.atan( x / (ro0 - y) );\n     return {\n      lat: (2 * Math.atan(Math.pow(F/ro, 1/n)) - Math.PI / 2) * this.degRad,\n      lng: (lambda0 + theta / n) * this.degRad\n    };\n  } */\n};\nProj.degRad = 180 / Math.PI;\nProj.radDeg = Math.PI / 180;\nProj.radius = 6381372;\nfunction coordsToPoint(lat, lng) {\n  var projection = Map.maps[this.params.map].projection;\n  var _Proj$projection$type = Proj[projection.type](lat, lng, projection.centralMeridian),\n    x = _Proj$projection$type.x,\n    y = _Proj$projection$type.y;\n  var inset = this.getInsetForPoint(x, y);\n  if (!inset) {\n    return false;\n  }\n  var bbox = inset.bbox;\n  x = (x - bbox[0].x) / (bbox[1].x - bbox[0].x) * inset.width * this.scale;\n  y = (y - bbox[0].y) / (bbox[1].y - bbox[0].y) * inset.height * this.scale;\n  return {\n    x: x + this.transX * this.scale + inset.left * this.scale,\n    y: y + this.transY * this.scale + inset.top * this.scale\n  };\n}\nfunction getInsetForPoint(x, y) {\n  var insets = Map.maps[this.params.map].insets;\n  for (var index = 0; index < insets.length; index++) {\n    var _insets$index$bbox = insets[index].bbox,\n      start = _insets$index$bbox[0],\n      end = _insets$index$bbox[1];\n    if (x > start.x && x < end.x && y > start.y && y < end.y) {\n      return insets[index];\n    }\n  }\n}\nfunction getMarkerPosition(_ref) {\n  var coords = _ref.coords;\n  if (Map.maps[this.params.map].projection) {\n    return this.coordsToPoint.apply(this, coords);\n  }\n  return {\n    x: coords[0] * this.scale + this.transX * this.scale,\n    y: coords[1] * this.scale + this.transY * this.scale\n  };\n}\nfunction repositionLines() {\n  var point1 = false,\n    point2 = false;\n  for (var index in this._lines) {\n    for (var mindex in this._markers) {\n      var marker = this._markers[mindex];\n      if (marker.config.name === this._lines[index].config.from) {\n        point1 = this.getMarkerPosition(marker.config);\n      }\n      if (marker.config.name === this._lines[index].config.to) {\n        point2 = this.getMarkerPosition(marker.config);\n      }\n    }\n    if (point1 !== false && point2 !== false) {\n      this._lines[index].setStyle({\n        x1: point1.x,\n        y1: point1.y,\n        x2: point2.x,\n        y2: point2.y\n      });\n    }\n  }\n}\nfunction repositionMarkers() {\n  for (var index in this._markers) {\n    var point = this.getMarkerPosition(this._markers[index].config);\n    if (point !== false) {\n      this._markers[index].element.setStyle({\n        cx: point.x,\n        cy: point.y\n      });\n    }\n  }\n}\nfunction repositionLabels() {\n  var labels = this.params.labels;\n  if (!labels) {\n    return;\n  }\n\n  // Regions labels\n  if (labels.regions) {\n    for (var key in this.regions) {\n      this.regions[key].element.updateLabelPosition();\n    }\n  }\n\n  // Markers labels\n  if (labels.markers) {\n    for (var _key in this._markers) {\n      this._markers[_key].element.updateLabelPosition();\n    }\n  }\n}\nvar core = {\n  _setupContainerEvents: setupContainerEvents,\n  _setupElementEvents: setupElementEvents,\n  _setupZoomButtons: setupZoomButtons,\n  _setupContainerTouchEvents: setupContainerTouchEvents,\n  _createRegions: createRegions,\n  _createLines: createLines,\n  _createMarkers: createMarkers,\n  _createSeries: createSeries,\n  _applyTransform: applyTransform,\n  _resize: resize,\n  _setScale: setScale,\n  setFocus: setFocus,\n  updateSize: updateSize,\n  coordsToPoint: coordsToPoint,\n  getInsetForPoint: getInsetForPoint,\n  getMarkerPosition: getMarkerPosition,\n  _repositionLines: repositionLines,\n  _repositionMarkers: repositionMarkers,\n  _repositionLabels: repositionLabels\n};\nvar Defaults = {\n  map: 'world',\n  backgroundColor: 'transparent',\n  draggable: true,\n  zoomButtons: true,\n  zoomOnScroll: true,\n  zoomOnScrollSpeed: 3,\n  zoomMax: 12,\n  zoomMin: 1,\n  zoomAnimate: true,\n  showTooltip: true,\n  zoomStep: 1.5,\n  bindTouchEvents: true,\n  // Line options\n  lineStyle: {\n    stroke: '#808080',\n    strokeWidth: 1,\n    strokeLinecap: 'round'\n  },\n  // Marker options\n  markersSelectable: false,\n  markersSelectableOne: false,\n  markerStyle: {\n    initial: {\n      r: 7,\n      fill: '#374151',\n      fillOpacity: 1,\n      stroke: '#FFF',\n      strokeWidth: 5,\n      strokeOpacity: .5\n    },\n    hover: {\n      fill: '#3cc0ff',\n      cursor: 'pointer'\n    },\n    selected: {\n      fill: 'blue'\n    },\n    selectedHover: {}\n  },\n  markerLabelStyle: {\n    initial: {\n      fontFamily: 'Verdana',\n      fontSize: 12,\n      fontWeight: 500,\n      cursor: 'default',\n      fill: '#374151'\n    },\n    hover: {\n      cursor: 'pointer'\n    },\n    selected: {},\n    selectedHover: {}\n  },\n  // Region options\n  regionsSelectable: false,\n  regionsSelectableOne: false,\n  regionStyle: {\n    initial: {\n      fill: '#dee2e8',\n      fillOpacity: 1,\n      stroke: 'none',\n      strokeWidth: 0\n    },\n    hover: {\n      fillOpacity: .7,\n      cursor: 'pointer'\n    },\n    selected: {\n      fill: '#9ca3af'\n    },\n    selectedHover: {}\n  },\n  regionLabelStyle: {\n    initial: {\n      fontFamily: 'Verdana',\n      fontSize: '12',\n      fontWeight: 'bold',\n      cursor: 'default',\n      fill: '#35373e'\n    },\n    hover: {\n      cursor: 'pointer'\n    }\n  }\n};\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGElement = /*#__PURE__*/function () {\n  function SVGElement(name, config) {\n    this.node = this._createElement(name);\n    if (config) {\n      this.set(config);\n    }\n  }\n\n  // Create new SVG element `svg`, `g`, `path`, `line`, `circle`, `image`, etc.\n  // https://developer.mozilla.org/en-US/docs/Web/API/Document/createElementNS#important_namespace_uris\n  var _proto = SVGElement.prototype;\n  _proto._createElement = function _createElement(tagName) {\n    return document.createElementNS('http://www.w3.org/2000/svg', tagName);\n  };\n  _proto.addClass = function addClass(className) {\n    this.node.setAttribute('class', className);\n  };\n  _proto.getBBox = function getBBox() {\n    return this.node.getBBox();\n  }\n\n  // Apply attributes on the current node element\n  ;\n  _proto.set = function set(property, value) {\n    if (typeof property === 'object') {\n      for (var attr in property) {\n        this.applyAttr(attr, property[attr]);\n      }\n    } else {\n      this.applyAttr(property, value);\n    }\n  };\n  _proto.get = function get(property) {\n    return this.style.initial[property];\n  };\n  _proto.applyAttr = function applyAttr(property, value) {\n    this.node.setAttribute(hyphenate(property), value);\n  };\n  _proto.remove = function remove() {\n    removeElement(this.node);\n  };\n  return SVGElement;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGShapeElement = /*#__PURE__*/function (_SVGElement) {\n  function SVGShapeElement(name, config, style) {\n    var _this;\n    if (style === void 0) {\n      style = {};\n    }\n    _this = _SVGElement.call(this, name, config) || this;\n    _this.isHovered = false;\n    _this.isSelected = false;\n    _this.style = style;\n    _this.style.current = {};\n    _this.updateStyle();\n    return _this;\n  }\n  _inheritsLoose(SVGShapeElement, _SVGElement);\n  var _proto = SVGShapeElement.prototype;\n  _proto.setStyle = function setStyle(property, value) {\n    if (typeof property === 'object') {\n      merge(this.style.current, property);\n    } else {\n      var _merge;\n      merge(this.style.current, (_merge = {}, _merge[property] = value, _merge));\n    }\n    this.updateStyle();\n  };\n  _proto.updateStyle = function updateStyle() {\n    var attrs = {};\n    merge(attrs, this.style.initial);\n    merge(attrs, this.style.current);\n    if (this.isHovered) {\n      merge(attrs, this.style.hover);\n    }\n    if (this.isSelected) {\n      merge(attrs, this.style.selected);\n      if (this.isHovered) {\n        merge(attrs, this.style.selectedHover);\n      }\n    }\n    this.set(attrs);\n  };\n  return SVGShapeElement;\n}(SVGElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGTextElement = /*#__PURE__*/function (_SVGShapeElement) {\n  function SVGTextElement(config, style) {\n    return _SVGShapeElement.call(this, 'text', config, style) || this;\n  }\n  _inheritsLoose(SVGTextElement, _SVGShapeElement);\n  var _proto = SVGTextElement.prototype;\n  _proto.applyAttr = function applyAttr(attr, value) {\n    attr === 'text' ? this.node.textContent = value : _SVGShapeElement.prototype.applyAttr.call(this, attr, value);\n  };\n  return SVGTextElement;\n}(SVGShapeElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGImageElement = /*#__PURE__*/function (_SVGShapeElement) {\n  function SVGImageElement(config, style) {\n    return _SVGShapeElement.call(this, 'image', config, style) || this;\n  }\n  _inheritsLoose(SVGImageElement, _SVGShapeElement);\n  var _proto = SVGImageElement.prototype;\n  _proto.applyAttr = function applyAttr(attr, value) {\n    var imageUrl;\n    if (attr === 'image') {\n      // This get executed when we have url in series.markers[0].scale.someScale.url\n      if (typeof value === 'object') {\n        imageUrl = value.url;\n        this.offset = value.offset || [0, 0];\n      } else {\n        imageUrl = value;\n        this.offset = [0, 0];\n      }\n      this.node.setAttributeNS('http://www.w3.org/1999/xlink', 'href', imageUrl);\n\n      // Set width and height then call this `applyAttr` again\n      this.width = 23;\n      this.height = 23;\n      this.applyAttr('width', this.width);\n      this.applyAttr('height', this.height);\n      this.applyAttr('x', this.cx - this.width / 2 + this.offset[0]);\n      this.applyAttr('y', this.cy - this.height / 2 + this.offset[1]);\n    } else if (attr == 'cx') {\n      this.cx = value;\n      if (this.width) {\n        this.applyAttr('x', value - this.width / 2 + this.offset[0]);\n      }\n    } else if (attr == 'cy') {\n      this.cy = value;\n      if (this.height) {\n        this.applyAttr('y', value - this.height / 2 + this.offset[1]);\n      }\n    } else {\n      // This time Call SVGElement\n      _SVGShapeElement.prototype.applyAttr.apply(this, arguments);\n    }\n  };\n  return SVGImageElement;\n}(SVGShapeElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGCanvasElement = /*#__PURE__*/function (_SVGElement) {\n  function SVGCanvasElement(container) {\n    var _this;\n    _this = _SVGElement.call(this, 'svg') || this; // Create svg element for holding the whole map\n\n    _this._container = container;\n\n    // Create the defs element\n    _this._defsElement = new SVGElement('defs');\n\n    // Create group element which will hold the paths (regions)\n    _this._rootElement = new SVGElement('g', {\n      id: 'jvm-regions-group'\n    });\n\n    // Append the defs element to the this.node (SVG tag)\n    _this.node.appendChild(_this._defsElement.node);\n\n    // Append the group to this.node (SVG tag)\n    _this.node.appendChild(_this._rootElement.node);\n\n    // Append this.node (SVG tag) to the container\n    _this._container.appendChild(_this.node);\n    return _this;\n  }\n  _inheritsLoose(SVGCanvasElement, _SVGElement);\n  var _proto = SVGCanvasElement.prototype;\n  _proto.setSize = function setSize(width, height) {\n    this.node.setAttribute('width', width);\n    this.node.setAttribute('height', height);\n  };\n  _proto.applyTransformParams = function applyTransformParams(scale, transX, transY) {\n    this._rootElement.node.setAttribute('transform', \"scale(\" + scale + \") translate(\" + transX + \", \" + transY + \")\");\n  }\n\n  // Create `path` element\n  ;\n  _proto.createPath = function createPath(config, style) {\n    var path = new SVGShapeElement('path', config, style);\n    path.node.setAttribute('fill-rule', 'evenodd');\n    return this._add(path);\n  }\n\n  // Create `circle` element\n  ;\n  _proto.createCircle = function createCircle(config, style, group) {\n    var circle = new SVGShapeElement('circle', config, style);\n    return this._add(circle, group);\n  }\n\n  // Create `line` element\n  ;\n  _proto.createLine = function createLine(config, style, group) {\n    var line = new SVGShapeElement('line', config, style);\n    return this._add(line, group);\n  }\n\n  // Create `text` element\n  ;\n  _proto.createText = function createText(config, style, group) {\n    var text = new SVGTextElement(config, style);\n    return this._add(text, group);\n  }\n\n  // Create `image` element\n  ;\n  _proto.createImage = function createImage(config, style, group) {\n    var image = new SVGImageElement(config, style);\n    return this._add(image, group);\n  }\n\n  // Create `g` element\n  ;\n  _proto.createGroup = function createGroup(id) {\n    var group = new SVGElement('g');\n    this.node.appendChild(group.node);\n    if (id) {\n      group.node.id = id;\n    }\n    group.canvas = this;\n    return group;\n  }\n\n  // Add some element to a spcific group or the root element if the group isn't given\n  ;\n  _proto._add = function _add(element, group) {\n    group = group || this._rootElement;\n    group.node.appendChild(element.node);\n    return element;\n  };\n  return SVGCanvasElement;\n}(SVGElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Tooltip = /*#__PURE__*/function (_BaseComponent) {\n  function Tooltip(map) {\n    var _this;\n    _this = _BaseComponent.call(this) || this;\n    var tooltip = createElement('div', 'jvm-tooltip');\n    _this._map = map;\n    _this._tooltip = document.body.appendChild(tooltip);\n    _this._bindEventListeners();\n    return _this || _assertThisInitialized(_this);\n  }\n  _inheritsLoose(Tooltip, _BaseComponent);\n  var _proto = Tooltip.prototype;\n  _proto._bindEventListeners = function _bindEventListeners() {\n    var _this2 = this;\n    EventHandler.on(this._map.container, 'mousemove', function (event) {\n      if (!_this2._tooltip.classList.contains('active')) {\n        return;\n      }\n      var container = findElement(_this2._map.container, '#jvm-regions-group').getBoundingClientRect();\n      var space = 5; // Space between the cursor and tooltip element\n\n      // Tooltip\n      var _this2$_tooltip$getBo = _this2._tooltip.getBoundingClientRect(),\n        height = _this2$_tooltip$getBo.height,\n        width = _this2$_tooltip$getBo.width;\n      var topIsPassed = event.clientY <= container.top + height + space;\n      var top = event.pageY - height - space;\n      var left = event.pageX - width - space;\n\n      // Ensure the tooltip will never cross outside the canvas area(map)\n      if (topIsPassed) {\n        // Top:\n        top += height + space;\n\n        // The cursor is a bit larger from left side\n        left -= space * 2;\n      }\n      if (event.clientX < container.left + width + space) {\n        // Left:\n        left = event.pageX + space + 2;\n        if (topIsPassed) {\n          left += space * 2;\n        }\n      }\n      _this2.css({\n        top: top + \"px\",\n        left: left + \"px\"\n      });\n    });\n  };\n  _proto.getElement = function getElement() {\n    return this._tooltip;\n  };\n  _proto.show = function show() {\n    this._tooltip.classList.add('active');\n  };\n  _proto.hide = function hide() {\n    this._tooltip.classList.remove('active');\n  };\n  _proto.text = function text(string, html) {\n    if (html === void 0) {\n      html = false;\n    }\n    var property = html ? 'innerHTML' : 'textContent';\n    if (!string) {\n      return this._tooltip[property];\n    }\n    this._tooltip[property] = string;\n  };\n  _proto.css = function css(_css) {\n    for (var style in _css) {\n      this._tooltip.style[style] = _css[style];\n    }\n    return this;\n  };\n  return Tooltip;\n}(BaseComponent);\nvar DataVisualization = /*#__PURE__*/function () {\n  function DataVisualization(_ref, map) {\n    var scale = _ref.scale,\n      values = _ref.values;\n    this._scale = scale;\n    this._values = values;\n    this._fromColor = this.hexToRgb(scale[0]);\n    this._toColor = this.hexToRgb(scale[1]);\n    this._map = map;\n    this.setMinMaxValues(values);\n    this.visualize();\n  }\n  var _proto = DataVisualization.prototype;\n  _proto.setMinMaxValues = function setMinMaxValues(values) {\n    this.min = Number.MAX_VALUE;\n    this.max = 0;\n    for (var value in values) {\n      value = parseFloat(values[value]);\n      if (value > this.max) {\n        this.max = value;\n      }\n      if (value < this.min) {\n        this.min = value;\n      }\n    }\n  };\n  _proto.visualize = function visualize() {\n    var attrs = {},\n      value;\n    for (var regionCode in this._values) {\n      value = parseFloat(this._values[regionCode]);\n      if (!isNaN(value)) {\n        attrs[regionCode] = this.getValue(value);\n      }\n    }\n    this.setAttributes(attrs);\n  };\n  _proto.setAttributes = function setAttributes(attrs) {\n    for (var code in attrs) {\n      if (this._map.regions[code]) {\n        this._map.regions[code].element.setStyle('fill', attrs[code]);\n      }\n    }\n  };\n  _proto.getValue = function getValue(value) {\n    if (this.min === this.max) {\n      return \"#\" + this._toColor.join('');\n    }\n    var hex,\n      color = '#';\n    for (var i = 0; i < 3; i++) {\n      hex = Math.round(this._fromColor[i] + (this._toColor[i] - this._fromColor[i]) * ((value - this.min) / (this.max - this.min))).toString(16);\n      color += (hex.length === 1 ? '0' : '') + hex;\n    }\n    return color;\n  };\n  _proto.hexToRgb = function hexToRgb(h) {\n    var r = 0,\n      g = 0,\n      b = 0;\n    if (h.length == 4) {\n      r = '0x' + h[1] + h[1];\n      g = '0x' + h[2] + h[2];\n      b = '0x' + h[3] + h[3];\n    } else if (h.length == 7) {\n      r = '0x' + h[1] + h[2];\n      g = '0x' + h[3] + h[4];\n      b = '0x' + h[5] + h[6];\n    }\n    return [parseInt(r), parseInt(g), parseInt(b)];\n  };\n  return DataVisualization;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Map = /*#__PURE__*/function () {\n  function Map(options) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // Merge the given options with the default options\n    this.params = merge(Map.defaults, options, true);\n\n    // Throw an error if the given map name doesn't match\n    // the map that was set in map file\n    if (!Map.maps[this.params.map]) {\n      throw new Error(\"Attempt to use map which was not loaded: \" + options.map);\n    }\n    this.regions = {};\n    this.scale = 1;\n    this.transX = 0;\n    this.transY = 0;\n    this._mapData = Map.maps[this.params.map];\n    this._markers = {};\n    this._lines = {};\n    this._defaultWidth = this._mapData.width;\n    this._defaultHeight = this._mapData.height;\n    this._height = 0;\n    this._width = 0;\n    this._baseScale = 1;\n    this._baseTransX = 0;\n    this._baseTransY = 0;\n\n    // `document` is already ready, just initialise now\n    if (document.readyState !== 'loading') {\n      this._init();\n    } else {\n      // Wait until `document` is ready\n      window.addEventListener('DOMContentLoaded', function () {\n        return _this._init();\n      });\n    }\n  }\n  var _proto = Map.prototype;\n  _proto._init = function _init() {\n    var options = this.params;\n    this.container = getElement(options.selector);\n    this.container.classList.add('jvm-container');\n\n    // The map canvas element\n    this.canvas = new SVGCanvasElement(this.container);\n\n    // Set the map's background color\n    this.setBackgroundColor(options.backgroundColor);\n\n    // Create regions\n    this._createRegions();\n\n    // Update size\n    this.updateSize();\n\n    // Create lines\n    this._createLines(options.lines || {}, options.markers || {});\n\n    // Create markers\n    this._createMarkers(options.markers);\n\n    // Position labels\n    this._repositionLabels();\n\n    // Setup the container events\n    this._setupContainerEvents();\n\n    // Setup regions/markers events\n    this._setupElementEvents();\n\n    // Create zoom buttons if `zoomButtons` is presented\n    if (options.zoomButtons) {\n      this._setupZoomButtons();\n    }\n\n    // Create toolip\n    if (options.showTooltip) {\n      this._tooltip = new Tooltip(this);\n    }\n\n    // Set selected regions if any\n    if (options.selectedRegions) {\n      this._setSelected('regions', options.selectedRegions);\n    }\n\n    // Set selected regions if any\n    if (options.selectedMarkers) {\n      this._setSelected('_markers', options.selectedMarkers);\n    }\n\n    // Set focus on a spcific region\n    if (options.focusOn) {\n      this.setFocus(options.focusOn);\n    }\n\n    // Data visualization\n    if (options.visualizeData) {\n      this.dataVisualization = new DataVisualization(options.visualizeData, this);\n    }\n\n    // Bind touch events if true\n    if (options.bindTouchEvents) {\n      if ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch) {\n        this._setupContainerTouchEvents();\n      }\n    }\n\n    // Create series if any\n    if (options.series) {\n      this.container.appendChild(this.legendHorizontal = createElement('div', 'jvm-series-container jvm-series-h'));\n      this.container.appendChild(this.legendVertical = createElement('div', 'jvm-series-container jvm-series-v'));\n      this._createSeries();\n    }\n\n    // Fire loaded event\n    this._emit(Events.onLoaded, [this]);\n  }\n\n  // Public\n  ;\n  _proto.setBackgroundColor = function setBackgroundColor(color) {\n    this.container.style.backgroundColor = color;\n  }\n\n  // Region methods\n  ;\n  _proto.getSelectedRegions = function getSelectedRegions() {\n    return this._getSelected('regions');\n  };\n  _proto.clearSelectedRegions = function clearSelectedRegions(regions) {\n    var _this2 = this;\n    if (regions === void 0) {\n      regions = undefined;\n    }\n    regions = this._normalizeRegions(regions) || this._getSelected('regions');\n    regions.forEach(function (key) {\n      _this2.regions[key].element.select(false);\n    });\n  };\n  _proto.setSelectedRegions = function setSelectedRegions(regions) {\n    this.clearSelectedRegions();\n    this._setSelected('regions', this._normalizeRegions(regions));\n  }\n\n  // Markers methods\n  ;\n  _proto.getSelectedMarkers = function getSelectedMarkers() {\n    return this._getSelected('_markers');\n  };\n  _proto.clearSelectedMarkers = function clearSelectedMarkers() {\n    this._clearSelected('_markers');\n  };\n  _proto.addMarkers = function addMarkers(config) {\n    config = Array.isArray(config) ? config : [config];\n    this._createMarkers(config, true);\n  };\n  _proto.removeMarkers = function removeMarkers(markers) {\n    var _this3 = this;\n    if (!markers) {\n      markers = Object.keys(this._markers);\n    }\n    markers.forEach(function (index) {\n      // Remove the element from the DOM\n      _this3._markers[index].element.remove();\n      // Remove the element from markers object\n      delete _this3._markers[index];\n    });\n  };\n  _proto.addLine = function addLine(from, to, style) {\n    if (style === void 0) {\n      style = {};\n    }\n    console.warn('`addLine` method is deprecated, please use `addLines` instead.');\n    this._createLines([{\n      from: from,\n      to: to,\n      style: style\n    }], this._markers, true);\n  };\n  _proto.addLines = function addLines(config) {\n    var uids = this._getLinesAsUids();\n    if (!Array.isArray(config)) {\n      config = [config];\n    }\n    this._createLines(config.filter(function (line) {\n      return !(uids.indexOf(getLineUid(line.from, line.to)) > -1);\n    }), this._markers, true);\n  };\n  _proto.removeLines = function removeLines(lines) {\n    var _this4 = this;\n    if (Array.isArray(lines)) {\n      lines = lines.map(function (line) {\n        return getLineUid(line.from, line.to);\n      });\n    } else {\n      lines = this._getLinesAsUids();\n    }\n    lines.forEach(function (uid) {\n      _this4._lines[uid].dispose();\n      delete _this4._lines[uid];\n    });\n  };\n  _proto.removeLine = function removeLine(from, to) {\n    console.warn('`removeLine` method is deprecated, please use `removeLines` instead.');\n    var uid = getLineUid(from, to);\n    if (this._lines.hasOwnProperty(uid)) {\n      this._lines[uid].element.remove();\n      delete this._lines[uid];\n    }\n  }\n\n  // Reset map\n  ;\n  _proto.reset = function reset() {\n    for (var key in this.series) {\n      for (var i = 0; i < this.series[key].length; i++) {\n        this.series[key][i].clear();\n      }\n    }\n    if (this.legendHorizontal) {\n      removeElement(this.legendHorizontal);\n      this.legendHorizontal = null;\n    }\n    if (this.legendVertical) {\n      removeElement(this.legendVertical);\n      this.legendVertical = null;\n    }\n    this.scale = this._baseScale;\n    this.transX = this._baseTransX;\n    this.transY = this._baseTransY;\n    this._applyTransform();\n    this.clearSelectedMarkers();\n    this.clearSelectedRegions();\n    this.removeMarkers();\n  }\n\n  // Destroy the map\n  ;\n  _proto.destroy = function destroy(destroyInstance) {\n    var _this5 = this;\n    if (destroyInstance === void 0) {\n      destroyInstance = true;\n    }\n    // Remove event registry\n    EventHandler.flush();\n\n    // Remove tooltip from DOM and memory\n    this._tooltip.dispose();\n\n    // Fire destroyed event\n    this._emit(Events.onDestroyed);\n\n    // Remove references\n    if (destroyInstance) {\n      Object.keys(this).forEach(function (key) {\n        try {\n          delete _this5[key];\n        } catch (e) {}\n      });\n    }\n  };\n  _proto.extend = function extend(name, callback) {\n    if (typeof this[name] === 'function') {\n      throw new Error(\"The method [\" + name + \"] does already exist, please use another name.\");\n    }\n    Map.prototype[name] = callback;\n  }\n\n  // Private\n  ;\n  _proto._emit = function _emit(eventName, args) {\n    for (var event in Events) {\n      if (Events[event] === eventName && typeof this.params[event] === 'function') {\n        this.params[event].apply(this, args);\n      }\n    }\n  }\n\n  // Get selected markers/regions\n  ;\n  _proto._getSelected = function _getSelected(type) {\n    var selected = [];\n    for (var key in this[type]) {\n      if (this[type][key].element.isSelected) {\n        selected.push(key);\n      }\n    }\n    return selected;\n  };\n  _proto._setSelected = function _setSelected(type, keys) {\n    var _this6 = this;\n    keys.forEach(function (key) {\n      if (_this6[type][key]) {\n        _this6[type][key].element.select(true);\n      }\n    });\n  };\n  _proto._clearSelected = function _clearSelected(type) {\n    var _this7 = this;\n    this._getSelected(type).forEach(function (key) {\n      _this7[type][key].element.select(false);\n    });\n  };\n  _proto._getLinesAsUids = function _getLinesAsUids() {\n    return Object.keys(this._lines);\n  };\n  _proto._normalizeRegions = function _normalizeRegions(regions) {\n    return typeof regions === 'string' ? [regions] : regions;\n  };\n  return Map;\n}();\nMap.maps = {};\nMap.defaults = Defaults;\nObject.assign(Map.prototype, core);\n\n/**\n * jsVectorMap\n * Copyrights (c) Mustafa Omar https://github.com/themustafaomar\n * Released under the MIT License.\n */\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar jsVectorMap = /*#__PURE__*/function () {\n  function jsVectorMap(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!options.selector) {\n      throw new Error('Selector is not given.');\n    }\n    return new Map(options);\n  }\n\n  // Public\n  jsVectorMap.addMap = function addMap(name, map) {\n    Map.maps[name] = map;\n  };\n  return jsVectorMap;\n}();\nvar index = window.jsVectorMap = jsVectorMap;\nexport { index as default };","map":{"version":3,"names":["isMergeableObject","value","isNonNullObject","isSpecial","stringValue","Object","prototype","toString","call","isNode","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","Node","emptyTarget","val","Array","isArray","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","defaultArrayMerge","target","source","concat","map","element","getMergeFunction","key","customMerge","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getKeys","keys","propertyIsOnObject","object","property","_","propertyIsUnsafe","hasOwnProperty","mergeObject","destination","forEach","arrayMerge","sourceIsArray","targetIsArray","sourceAndTargetTypesMatch","getElement","selector","nodeType","document","querySelector","createElement","type","classes","content","html","el","className","findElement","parentElement","Element","removeElement","parentNode","removeChild","isImageUrl","url","test","hyphenate","string","replace","m","toLowerCase","merge","deep","assign","getLineUid","from","to","inherit","eventRegistry","eventUid","EventHandler","on","event","handler","uid","_uid","addEventListener","delegate","split","eventName","e","matches","off","eventType","removeEventListener","flush","getEventRegistry","setupContainerEvents","_this","mouseDown","oldPageX","oldPageY","params","draggable","container","transX","pageX","scale","transY","pageY","_applyTransform","body","zoomOnScroll","deltaY","wheelDelta","detail","rect","getBoundingClientRect","offsetX","left","window","pageXOffset","offsetY","top","pageYOffset","zoomStep","Math","pow","zoomOnScrollSpeed","tooltip","_tooltip","hide","_setScale","preventDefault","Events","onLoaded","onViewportChange","onRegionClick","onMarkerClick","onRegionSelected","onMarkerSelected","onRegionTooltipShow","onMarkerTooltipShow","onDestroyed","parseEvent","isTooltip","getAttribute","indexOf","isRegion","code","regions","_markers","tooltipText","_mapData","paths","name","config","setupElementEvents","mouseMoved","abs","data","showTooltip","hover","text","show","_emit","regionsSelectable","markersSelectable","_clearSelected","isSelected","select","_getSelected","_parseEvent","setupZoomButtons","zoomin","zoomout","appendChild","_width","_height","zoomAnimate","setupContainerTouchEvents","touchStartScale","touchStartDistance","touchX","touchY","centerTouchX","centerTouchY","lastTouchesLength","handleTouchEvent","touches","offset","transXOld","transYOld","length","sqrt","scrollY","scrollX","_arrayLikeToArray","r","a","n","_assertThisInitialized","ReferenceError","_createForOfIteratorHelperLoose","t","iterator","next","bind","_unsupportedIterableToArray","o","done","TypeError","_extends","arguments","apply","_inheritsLoose","create","constructor","_setPrototypeOf","setPrototypeOf","__proto__","slice","BaseComponent","_proto","dispose","shape","remove","_iterator","getOwnPropertyNames","_step","propertyName","Interactable","getLabelText","label","render","marker","push","getLabelOffsets","offsets","setStyle","state","_setStatus","updateStyle","Region","_BaseComponent","_ref","path","style","labelStyle","labelsGroup","_map","_createRegion","bbox","getBBox","labelX","x","width","labelY","y","height","canvas","createText","textAnchor","alignmentBaseline","dataCode","addClass","createPath","d","updateLabelPosition","set","createRegions","_regionLabelsGroup","createGroup","region","regionStyle","regionLabelStyle","labels","Line","index","x1","y1","x2","y2","group","createLine","dataIndex","createLines","lines","markers","isRecentlyCreated","point1","point2","linesGroup","mindex","markerConfig","getMarkerPosition","_lines","initial","lineStyle","Marker","cx","cy","_isImage","image","_createLabel","_labelX","_offsets","node","baseVal","_labelY","_ref2","labelText","dy","markerLabelStyle","createMarkers","_markersGroup","_markerLabelsGroup","_loop","point","coords","join","i","markerStyle","removeMarkers","_ret","Legend","_options","_series","series","_body","cssClass","setAttribute","vertical","legendVertical","legendHorizontal","ticks","getTicks","inner","innderHTML","title","legendTitle","tick","sample","attribute","background","backgroundSize","labelRender","tickText","OrdinalScale","_scale","getValue","Series","elements","_elements","_values","values","attributes","setAttributes","legend","setValues","attrs","clear","createSeries","applyTransform","maxTransX","maxTransY","minTransX","minTransY","_defaultWidth","_defaultHeight","applyTransformParams","_repositionMarkers","_repositionLines","_repositionLabels","resize","curBaseScale","_baseScale","_baseTransX","_baseTransY","setScale","anchorX","anchorY","isCentered","animate","interval","count","round","max","scaleStart","scaleDiff","transXStart","transXDiff","transYStart","transYDiff","zoomMax","zoomMin","setInterval","clearInterval","setFocus","codes","itemBbox","min","coordsToPoint","updateSize","offsetWidth","offsetHeight","_resize","setSize","Proj","mill","lat","lng","c","radius","radDeg","log","tan","merc","PI","aea","fi0","lambda0","fi1","fi2","fi","lambda","sin","C","cos","theta","ro","ro0","lcc","F","degRad","projection","Map","maps","_Proj$projection$type","centralMeridian","inset","getInsetForPoint","insets","_insets$index$bbox","start","end","repositionLines","repositionMarkers","repositionLabels","_key","core","_setupContainerEvents","_setupElementEvents","_setupZoomButtons","_setupContainerTouchEvents","_createRegions","_createLines","_createMarkers","_createSeries","Defaults","backgroundColor","zoomButtons","bindTouchEvents","stroke","strokeWidth","strokeLinecap","markersSelectableOne","fill","fillOpacity","strokeOpacity","cursor","selected","selectedHover","fontFamily","fontSize","fontWeight","regionsSelectableOne","SVGElement","_createElement","tagName","createElementNS","attr","applyAttr","get","SVGShapeElement","_SVGElement","isHovered","current","_merge","SVGTextElement","_SVGShapeElement","textContent","SVGImageElement","imageUrl","setAttributeNS","SVGCanvasElement","_container","_defsElement","_rootElement","id","_add","createCircle","circle","line","createImage","Tooltip","_bindEventListeners","_this2","classList","contains","space","_this2$_tooltip$getBo","topIsPassed","clientY","clientX","css","add","_css","DataVisualization","_fromColor","hexToRgb","_toColor","setMinMaxValues","visualize","Number","MAX_VALUE","parseFloat","regionCode","isNaN","hex","color","h","g","b","parseInt","defaults","Error","readyState","_init","setBackgroundColor","selectedRegions","_setSelected","selectedMarkers","focusOn","visualizeData","dataVisualization","DocumentTouch","getSelectedRegions","clearSelectedRegions","undefined","_normalizeRegions","setSelectedRegions","getSelectedMarkers","clearSelectedMarkers","addMarkers","_this3","addLine","console","warn","addLines","uids","_getLinesAsUids","removeLines","_this4","removeLine","reset","destroy","destroyInstance","_this5","extend","callback","args","_this6","_this7","jsVectorMap","addMap","default"],"sources":["C:/Users/moham/Downloads/Comimttee/frontend/node_modules/jsvectormap/dist/jsvectormap.esm.js"],"sourcesContent":["/**\n * By https://github.com/TehShrike/deepmerge\n */\n\nvar isMergeableObject = function isMergeableObject(value) {\n  return isNonNullObject(value) && !isSpecial(value);\n};\nfunction isNonNullObject(value) {\n  return !!value && typeof value === 'object';\n}\nfunction isSpecial(value) {\n  var stringValue = Object.prototype.toString.call(value);\n  return stringValue === '[object RegExp]' || stringValue === '[object Date]' || isNode(value) || isReactElement(value);\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\nfunction isReactElement(value) {\n  return value.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction isNode(value) {\n  return value instanceof Node;\n}\nfunction emptyTarget(val) {\n  return Array.isArray(val) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n  return options.clone !== false && options.isMergeableObject(value) ? deepmerge(emptyTarget(value), value, options) : value;\n}\nfunction defaultArrayMerge(target, source, options) {\n  return target.concat(source).map(function (element) {\n    return cloneUnlessOtherwiseSpecified(element, options);\n  });\n}\nfunction getMergeFunction(key, options) {\n  if (!options.customMerge) {\n    return deepmerge;\n  }\n  var customMerge = options.customMerge(key);\n  return typeof customMerge === 'function' ? customMerge : deepmerge;\n}\nfunction getEnumerableOwnPropertySymbols(target) {\n  return Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(target).filter(function (symbol) {\n    return target.propertyIsEnumerable(symbol);\n  }) : [];\n}\nfunction getKeys(target) {\n  return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target));\n}\nfunction propertyIsOnObject(object, property) {\n  try {\n    return property in object;\n  } catch (_) {\n    return false;\n  }\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n  return propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n  && !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n  && Object.propertyIsEnumerable.call(target, key)); // and also unsafe if they're nonenumerable.\n}\nfunction mergeObject(target, source, options) {\n  var destination = {};\n  if (options.isMergeableObject(target)) {\n    getKeys(target).forEach(function (key) {\n      destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n    });\n  }\n  getKeys(source).forEach(function (key) {\n    if (propertyIsUnsafe(target, key)) {\n      return;\n    }\n    if (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n      destination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n    } else {\n      destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n    }\n  });\n  return destination;\n}\nvar deepmerge = function deepmerge(target, source, options) {\n  options = options || {};\n  options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n  options.isMergeableObject = options.isMergeableObject || isMergeableObject;\n  // cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n  // implementations can use it. The caller may not replace it.\n  options.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n  var sourceIsArray = Array.isArray(source);\n  var targetIsArray = Array.isArray(target);\n  var sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n  if (!sourceAndTargetTypesMatch) {\n    return cloneUnlessOtherwiseSpecified(source, options);\n  } else if (sourceIsArray) {\n    return options.arrayMerge(target, source, options);\n  } else {\n    return mergeObject(target, source, options);\n  }\n};\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\nvar getElement = function getElement(selector) {\n  if (typeof selector === 'object' && typeof selector.nodeType !== 'undefined') {\n    return selector;\n  }\n  if (typeof selector === 'string') {\n    return document.querySelector(selector);\n  }\n  return null;\n};\nvar createElement = function createElement(type, classes, content, html) {\n  if (html === void 0) {\n    html = false;\n  }\n  var el = document.createElement(type);\n  if (content) {\n    el[!html ? 'textContent' : 'innerHTML'] = content;\n  }\n  if (classes) {\n    el.className = classes;\n  }\n  return el;\n};\nvar findElement = function findElement(parentElement, selector) {\n  return Element.prototype.querySelector.call(parentElement, selector);\n};\nvar removeElement = function removeElement(target) {\n  target.parentNode.removeChild(target);\n};\nvar isImageUrl = function isImageUrl(url) {\n  return /\\.(jpg|gif|png)$/.test(url);\n};\nvar hyphenate = function hyphenate(string) {\n  return string.replace(/[\\w]([A-Z])/g, function (m) {\n    return m[0] + \"-\" + m[1];\n  }).toLowerCase();\n};\nvar merge = function merge(target, source, deep) {\n  if (deep === void 0) {\n    deep = false;\n  }\n  if (deep) {\n    return deepmerge(target, source);\n  }\n  return Object.assign(target, source);\n};\nvar getLineUid = function getLineUid(from, to) {\n  return from.toLowerCase() + \":to:\" + to.toLowerCase();\n};\nvar inherit = function inherit(target, source) {\n  Object.assign(target.prototype, source);\n};\n\nvar eventRegistry = {};\nvar eventUid = 1;\n\n/**\n * ------------------------------------------------------------------------\n * Event Handler\n * ------------------------------------------------------------------------\n */\nvar EventHandler = {\n  on: function on(element, event, handler, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var uid = \"jvm:\" + event + \"::\" + eventUid++;\n    eventRegistry[uid] = {\n      selector: element,\n      handler: handler\n    };\n    handler._uid = uid;\n    element.addEventListener(event, handler, options);\n  },\n  delegate: function delegate(element, event, selector, handler) {\n    event = event.split(' ');\n    event.forEach(function (eventName) {\n      EventHandler.on(element, eventName, function (e) {\n        var target = e.target;\n        if (target.matches(selector)) {\n          handler.call(target, e);\n        }\n      });\n    });\n  },\n  off: function off(element, event, handler) {\n    var eventType = event.split(':')[1];\n    element.removeEventListener(eventType, handler);\n    delete eventRegistry[handler._uid];\n  },\n  flush: function flush() {\n    Object.keys(eventRegistry).forEach(function (event) {\n      EventHandler.off(eventRegistry[event].selector, event, eventRegistry[event].handler);\n    });\n  },\n  getEventRegistry: function getEventRegistry() {\n    return eventRegistry;\n  }\n};\n\nfunction setupContainerEvents() {\n  var _this = this;\n  var map = this;\n  var mouseDown = false;\n  var oldPageX;\n  var oldPageY;\n  if (this.params.draggable) {\n    EventHandler.on(this.container, 'mousemove', function (e) {\n      if (!mouseDown) {\n        return false;\n      }\n      map.transX -= (oldPageX - e.pageX) / map.scale;\n      map.transY -= (oldPageY - e.pageY) / map.scale;\n      map._applyTransform();\n      oldPageX = e.pageX;\n      oldPageY = e.pageY;\n    });\n    EventHandler.on(this.container, 'mousedown', function (e) {\n      mouseDown = true;\n      oldPageX = e.pageX;\n      oldPageY = e.pageY;\n      return false;\n    });\n    EventHandler.on(document.body, 'mouseup', function () {\n      mouseDown = false;\n    });\n  }\n  if (this.params.zoomOnScroll) {\n    EventHandler.on(this.container, 'wheel', function (event) {\n      var deltaY = ((event.deltaY || -event.wheelDelta || event.detail) >> 10 || 1) * 75;\n      var rect = _this.container.getBoundingClientRect();\n      var offsetX = event.pageX - rect.left - window.pageXOffset;\n      var offsetY = event.pageY - rect.top - window.pageYOffset;\n      var zoomStep = Math.pow(1 + map.params.zoomOnScrollSpeed / 1000, -1.5 * deltaY);\n      if (map.tooltip) {\n        map._tooltip.hide();\n      }\n      map._setScale(map.scale * zoomStep, offsetX, offsetY);\n      event.preventDefault();\n    });\n  }\n}\n\nvar Events = {\n  onLoaded: 'map:loaded',\n  onViewportChange: 'viewport:changed',\n  onRegionClick: 'region:clicked',\n  onMarkerClick: 'marker:clicked',\n  onRegionSelected: 'region:selected',\n  onMarkerSelected: 'marker:selected',\n  onRegionTooltipShow: 'region.tooltip:show',\n  onMarkerTooltipShow: 'marker.tooltip:show',\n  onDestroyed: 'map:destroyed'\n};\n\nvar parseEvent = function parseEvent(map, selector, isTooltip) {\n  var element = getElement(selector);\n  var type = element.getAttribute('class').indexOf('jvm-region') === -1 ? 'marker' : 'region';\n  var isRegion = type === 'region';\n  var code = isRegion ? element.getAttribute('data-code') : element.getAttribute('data-index');\n  var event = isRegion ? Events.onRegionSelected : Events.onMarkerSelected;\n\n  // Init tooltip event\n  if (isTooltip) {\n    event = isRegion ? Events.onRegionTooltipShow : Events.onMarkerTooltipShow;\n  }\n  return {\n    type: type,\n    code: code,\n    event: event,\n    element: isRegion ? map.regions[code].element : map._markers[code].element,\n    tooltipText: isRegion ? map._mapData.paths[code].name || '' : map._markers[code].config.name || ''\n  };\n};\nfunction setupElementEvents() {\n  var map = this;\n  var container = this.container;\n  var pageX, pageY, mouseMoved;\n  EventHandler.on(container, 'mousemove', function (event) {\n    if (Math.abs(pageX - event.pageX) + Math.abs(pageY - event.pageY) > 2) {\n      mouseMoved = true;\n    }\n  });\n\n  // When the mouse is pressed\n  EventHandler.delegate(container, 'mousedown', '.jvm-element', function (event) {\n    pageX = event.pageX;\n    pageY = event.pageY;\n    mouseMoved = false;\n  });\n\n  // When the mouse is over the region/marker | When the mouse is out the region/marker\n  EventHandler.delegate(container, 'mouseover mouseout', '.jvm-element', function (event) {\n    var data = parseEvent(map, this, true);\n    var showTooltip = map.params.showTooltip;\n    if (event.type === 'mouseover') {\n      data.element.hover(true);\n      if (showTooltip) {\n        map._tooltip.text(data.tooltipText);\n        map._tooltip.show();\n        map._emit(data.event, [event, map._tooltip, data.code]);\n      }\n    } else {\n      data.element.hover(false);\n      if (showTooltip) {\n        map._tooltip.hide();\n      }\n    }\n  });\n\n  // When the click is released\n  EventHandler.delegate(container, 'mouseup', '.jvm-element', function (event) {\n    var data = parseEvent(map, this);\n    if (mouseMoved) {\n      return;\n    }\n    if (data.type === 'region' && map.params.regionsSelectable || data.type === 'marker' && map.params.markersSelectable) {\n      var element = data.element;\n\n      // We're checking if regions/markers|SelectableOne option is presented\n      if (map.params[data.type + \"sSelectableOne\"]) {\n        map._clearSelected(data.type + \"s\");\n      }\n      if (data.element.isSelected) {\n        element.select(false);\n      } else {\n        element.select(true);\n      }\n      map._emit(data.event, [data.code, element.isSelected, map._getSelected(data.type + \"s\")]);\n    }\n  });\n\n  // When region/marker is clicked\n  EventHandler.delegate(container, 'click', '.jvm-element', function (event) {\n    var _parseEvent = parseEvent(map, this),\n      type = _parseEvent.type,\n      code = _parseEvent.code;\n    map._emit(type === 'region' ? Events.onRegionClick : Events.onMarkerClick, [event, code]);\n  });\n}\n\nfunction setupZoomButtons() {\n  var _this = this;\n  var zoomin = createElement('div', 'jvm-zoom-btn jvm-zoomin', '&#43;', true);\n  var zoomout = createElement('div', 'jvm-zoom-btn jvm-zoomout', '&#x2212', true);\n  this.container.appendChild(zoomin);\n  this.container.appendChild(zoomout);\n  var handler = function handler(zoomin) {\n    if (zoomin === void 0) {\n      zoomin = true;\n    }\n    return function () {\n      return _this._setScale(zoomin ? _this.scale * _this.params.zoomStep : _this.scale / _this.params.zoomStep, _this._width / 2, _this._height / 2, false, _this.params.zoomAnimate);\n    };\n  };\n  EventHandler.on(zoomin, 'click', handler());\n  EventHandler.on(zoomout, 'click', handler(false));\n}\n\nfunction setupContainerTouchEvents() {\n  var map = this,\n    touchStartScale,\n    touchStartDistance,\n    touchX,\n    touchY,\n    centerTouchX,\n    centerTouchY,\n    lastTouchesLength;\n  var handleTouchEvent = function handleTouchEvent(e) {\n    var touches = e.touches;\n    var offset, scale, transXOld, transYOld;\n    if (e.type == 'touchstart') {\n      lastTouchesLength = 0;\n    }\n    if (touches.length == 1) {\n      if (lastTouchesLength == 1) {\n        transXOld = map.transX;\n        transYOld = map.transY;\n        map.transX -= (touchX - touches[0].pageX) / map.scale;\n        map.transY -= (touchY - touches[0].pageY) / map.scale;\n        map._tooltip.hide();\n        map._applyTransform();\n        if (transXOld != map.transX || transYOld != map.transY) {\n          e.preventDefault();\n        }\n      }\n      touchX = touches[0].pageX;\n      touchY = touches[0].pageY;\n    } else if (touches.length == 2) {\n      if (lastTouchesLength == 2) {\n        scale = Math.sqrt(Math.pow(touches[0].pageX - touches[1].pageX, 2) + Math.pow(touches[0].pageY - touches[1].pageY, 2)) / touchStartDistance;\n        map._setScale(touchStartScale * scale, centerTouchX, centerTouchY);\n        map._tooltip.hide();\n        e.preventDefault();\n      } else {\n        var rect = map.container.getBoundingClientRect();\n        offset = {\n          top: rect.top + window.scrollY,\n          left: rect.left + window.scrollX\n        };\n        if (touches[0].pageX > touches[1].pageX) {\n          centerTouchX = touches[1].pageX + (touches[0].pageX - touches[1].pageX) / 2;\n        } else {\n          centerTouchX = touches[0].pageX + (touches[1].pageX - touches[0].pageX) / 2;\n        }\n        if (touches[0].pageY > touches[1].pageY) {\n          centerTouchY = touches[1].pageY + (touches[0].pageY - touches[1].pageY) / 2;\n        } else {\n          centerTouchY = touches[0].pageY + (touches[1].pageY - touches[0].pageY) / 2;\n        }\n        centerTouchX -= offset.left;\n        centerTouchY -= offset.top;\n        touchStartScale = map.scale;\n        touchStartDistance = Math.sqrt(Math.pow(touches[0].pageX - touches[1].pageX, 2) + Math.pow(touches[0].pageY - touches[1].pageY, 2));\n      }\n    }\n    lastTouchesLength = touches.length;\n  };\n  EventHandler.on(map.container, 'touchstart', handleTouchEvent);\n  EventHandler.on(map.container, 'touchmove', handleTouchEvent);\n}\n\nfunction _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nfunction _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nfunction _createForOfIteratorHelperLoose(r, e) {\n  var t = \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (t) return (t = t.call(r)).next.bind(t);\n  if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && \"number\" == typeof r.length) {\n    t && (r = t);\n    var o = 0;\n    return function () {\n      return o >= r.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: r[o++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o);\n}\nfunction _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return _arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar BaseComponent = /*#__PURE__*/function () {\n  function BaseComponent() {}\n  var _proto = BaseComponent.prototype;\n  _proto.dispose = function dispose() {\n    if (this._tooltip) {\n      removeElement(this._tooltip);\n    } else {\n      // @todo: move shape in base component in v2\n      this.shape.remove();\n    }\n    for (var _iterator = _createForOfIteratorHelperLoose(Object.getOwnPropertyNames(this)), _step; !(_step = _iterator()).done;) {\n      var propertyName = _step.value;\n      this[propertyName] = null;\n    }\n  };\n  return BaseComponent;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Interactable\n * ------------------------------------------------------------------------\n */\nvar Interactable = {\n  getLabelText: function getLabelText(key, label) {\n    if (!label) {\n      return;\n    }\n    if (typeof label.render === 'function') {\n      var params = [];\n\n      // Pass additional paramater (Marker config object) in case it's a Marker.\n      if (this.config && this.config.marker) {\n        params.push(this.config.marker);\n      }\n\n      // Becuase we need to add the key always at the end\n      params.push(key);\n      return label.render.apply(this, params);\n    }\n    return key;\n  },\n  getLabelOffsets: function getLabelOffsets(key, label) {\n    if (typeof label.offsets === 'function') {\n      return label.offsets(key);\n    }\n\n    // If offsets are an array of offsets e.g offsets: [ [0, 25], [10, 15] ]\n    if (Array.isArray(label.offsets)) {\n      return label.offsets[key];\n    }\n    return [0, 0];\n  },\n  setStyle: function setStyle(property, value) {\n    this.shape.setStyle(property, value);\n  },\n  remove: function remove() {\n    this.shape.remove();\n    if (this.label) this.label.remove();\n  },\n  hover: function hover(state) {\n    this._setStatus('isHovered', state);\n  },\n  select: function select(state) {\n    this._setStatus('isSelected', state);\n  },\n  // Private\n  _setStatus: function _setStatus(property, state) {\n    this.shape[property] = state;\n    this.shape.updateStyle();\n    this[property] = state;\n    if (this.label) {\n      this.label[property] = state;\n      this.label.updateStyle();\n    }\n  }\n};\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Region = /*#__PURE__*/function (_BaseComponent) {\n  function Region(_ref) {\n    var _this;\n    var map = _ref.map,\n      code = _ref.code,\n      path = _ref.path,\n      style = _ref.style,\n      label = _ref.label,\n      labelStyle = _ref.labelStyle,\n      labelsGroup = _ref.labelsGroup;\n    _this = _BaseComponent.call(this) || this;\n    _this._map = map;\n    _this.shape = _this._createRegion(path, code, style);\n    var text = _this.getLabelText(code, label);\n\n    // If label is passed and render function returns something \n    if (label && text) {\n      var bbox = _this.shape.getBBox();\n      var offsets = _this.getLabelOffsets(code, label);\n      _this.labelX = bbox.x + bbox.width / 2 + offsets[0];\n      _this.labelY = bbox.y + bbox.height / 2 + offsets[1];\n      _this.label = _this._map.canvas.createText({\n        text: text,\n        textAnchor: 'middle',\n        alignmentBaseline: 'central',\n        dataCode: code,\n        x: _this.labelX,\n        y: _this.labelY\n      }, labelStyle, labelsGroup);\n      _this.label.addClass('jvm-region jvm-element');\n    }\n    return _this;\n  }\n  _inheritsLoose(Region, _BaseComponent);\n  var _proto = Region.prototype;\n  _proto._createRegion = function _createRegion(path, code, style) {\n    path = this._map.canvas.createPath({\n      d: path,\n      dataCode: code\n    }, style);\n    path.addClass('jvm-region jvm-element');\n    return path;\n  };\n  _proto.updateLabelPosition = function updateLabelPosition() {\n    if (this.label) {\n      this.label.set({\n        x: this.labelX * this._map.scale + this._map.transX * this._map.scale,\n        y: this.labelY * this._map.scale + this._map.transY * this._map.scale\n      });\n    }\n  };\n  return Region;\n}(BaseComponent);\ninherit(Region, Interactable);\n\nfunction createRegions() {\n  this._regionLabelsGroup = this._regionLabelsGroup || this.canvas.createGroup('jvm-regions-labels-group');\n  for (var code in this._mapData.paths) {\n    var region = new Region({\n      map: this,\n      code: code,\n      path: this._mapData.paths[code].path,\n      style: merge({}, this.params.regionStyle),\n      labelStyle: this.params.regionLabelStyle,\n      labelsGroup: this._regionLabelsGroup,\n      label: this.params.labels && this.params.labels.regions\n    });\n    this.regions[code] = {\n      config: this._mapData.paths[code],\n      element: region\n    };\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Line = /*#__PURE__*/function (_BaseComponent) {\n  function Line(_ref) {\n    var _this;\n    var index = _ref.index,\n      map = _ref.map,\n      style = _ref.style,\n      x1 = _ref.x1,\n      y1 = _ref.y1,\n      x2 = _ref.x2,\n      y2 = _ref.y2,\n      group = _ref.group,\n      config = _ref.config;\n    _this = _BaseComponent.call(this) || this;\n    _this.config = config;\n    _this.shape = map.canvas.createLine({\n      x1: x1,\n      y1: y1,\n      x2: x2,\n      y2: y2,\n      dataIndex: index\n    }, style, group);\n    _this.shape.addClass('jvm-line');\n    return _this;\n  }\n  _inheritsLoose(Line, _BaseComponent);\n  var _proto = Line.prototype;\n  _proto.setStyle = function setStyle(property, value) {\n    this.shape.setStyle(property, value);\n  };\n  return Line;\n}(BaseComponent);\n\nfunction createLines(lines, markers, isRecentlyCreated) {\n  if (isRecentlyCreated === void 0) {\n    isRecentlyCreated = false;\n  }\n  var point1 = false,\n    point2 = false;\n\n  // Create group for holding lines\n  // we're checking if `linesGroup` exists or not becuase we may add lines\n  // after the map has loaded so we will append the futured lines to this group as well.\n  this.linesGroup = this.linesGroup || this.canvas.createGroup('jvm-lines-group');\n  for (var index in lines) {\n    var config = lines[index];\n    for (var mindex in markers) {\n      var markerConfig = isRecentlyCreated ? markers[mindex].config : markers[mindex];\n      if (markerConfig.name === config.from) {\n        point1 = this.getMarkerPosition(markerConfig);\n      }\n      if (markerConfig.name === config.to) {\n        point2 = this.getMarkerPosition(markerConfig);\n      }\n    }\n    if (point1 !== false && point2 !== false) {\n      // Register lines with unique keys\n      this._lines[getLineUid(config.from, config.to)] = new Line({\n        index: index,\n        map: this,\n        // Merge the default `lineStyle` object with the custom `line` config style\n        style: merge({\n          initial: this.params.lineStyle\n        }, {\n          initial: config.style || {}\n        }, true),\n        x1: point1.x,\n        y1: point1.y,\n        x2: point2.x,\n        y2: point2.y,\n        group: this.linesGroup,\n        config: config\n      });\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Marker = /*#__PURE__*/function (_BaseComponent) {\n  function Marker(_ref) {\n    var _this;\n    var index = _ref.index,\n      style = _ref.style,\n      label = _ref.label,\n      cx = _ref.cx,\n      cy = _ref.cy,\n      map = _ref.map,\n      group = _ref.group;\n    _this = _BaseComponent.call(this) || this;\n\n    // Private\n    _this._map = map;\n    _this._isImage = !!style.initial.image;\n\n    // Protected\n    _this.config = arguments[0];\n    _this.shape = map.canvas[_this._isImage ? 'createImage' : 'createCircle']({\n      dataIndex: index,\n      cx: cx,\n      cy: cy\n    }, style, group);\n    _this.shape.addClass('jvm-marker jvm-element');\n    if (_this._isImage) {\n      _this.updateLabelPosition();\n    }\n    if (label) {\n      _this._createLabel(_this.config);\n    }\n    return _this;\n  }\n  _inheritsLoose(Marker, _BaseComponent);\n  var _proto = Marker.prototype;\n  _proto.updateLabelPosition = function updateLabelPosition() {\n    if (this.label) {\n      this.label.set({\n        x: this._labelX * this._map.scale + this._offsets[0] + this._map.transX * this._map.scale + 5 + (this._isImage ? (this.shape.width || 0) / 2 : this.shape.node.r.baseVal.value),\n        y: this._labelY * this._map.scale + this._map.transY * this._map.scale + this._offsets[1]\n      });\n    }\n  };\n  _proto._createLabel = function _createLabel(_ref2) {\n    var index = _ref2.index,\n      map = _ref2.map,\n      label = _ref2.label,\n      labelsGroup = _ref2.labelsGroup,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      marker = _ref2.marker,\n      isRecentlyCreated = _ref2.isRecentlyCreated;\n    var labelText = this.getLabelText(index, label);\n    this._labelX = cx / map.scale - map.transX;\n    this._labelY = cy / map.scale - map.transY;\n    this._offsets = isRecentlyCreated && marker.offsets ? marker.offsets : this.getLabelOffsets(index, label);\n    this.label = map.canvas.createText({\n      text: labelText,\n      dataIndex: index,\n      x: this._labelX,\n      y: this._labelY,\n      dy: '0.6ex'\n    }, map.params.markerLabelStyle, labelsGroup);\n    this.label.addClass('jvm-marker jvm-element');\n    if (isRecentlyCreated) {\n      this.updateLabelPosition();\n    }\n  };\n  return Marker;\n}(BaseComponent);\ninherit(Marker, Interactable);\n\nfunction createMarkers(markers, isRecentlyCreated) {\n  var _this = this;\n  if (markers === void 0) {\n    markers = {};\n  }\n  if (isRecentlyCreated === void 0) {\n    isRecentlyCreated = false;\n  }\n  // Create groups for holding markers and markers labels\n  // We're checking if `markersGroup` exists or not becuase we may add markers after the map has loaded\n  // So we will append the futured markers to this group as well.\n  this._markersGroup = this._markersGroup || this.canvas.createGroup('jvm-markers-group');\n  this._markerLabelsGroup = this._markerLabelsGroup || this.canvas.createGroup('jvm-markers-labels-group');\n  var _loop = function _loop() {\n      var config = markers[index];\n      var point = _this.getMarkerPosition(config);\n      var uid = config.coords.join(':');\n      if (!point) {\n        return 0; // continue\n      }\n\n      // We're checking if recently created marker does already exist\n      // If it does we don't need to create it again, so we'll continue\n      // Becuase we may have more than one marker submitted via `addMarkers` method.\n      if (isRecentlyCreated) {\n        if (Object.keys(_this._markers).filter(function (i) {\n          return _this._markers[i]._uid === uid;\n        }).length) {\n          return 0; // continue\n        }\n        index = Object.keys(_this._markers).length;\n      }\n      var marker = new Marker({\n        index: index,\n        map: _this,\n        // Merge the `markerStyle` object with the marker config `style` if presented.\n        style: merge(_this.params.markerStyle, _extends({}, config.style || {}), true),\n        label: _this.params.labels && _this.params.labels.markers,\n        labelsGroup: _this._markerLabelsGroup,\n        cx: point.x,\n        cy: point.y,\n        group: _this._markersGroup,\n        marker: config,\n        isRecentlyCreated: isRecentlyCreated\n      });\n\n      // Check for marker duplication\n      // this is useful when for example: a user clicks a button for creating marker two times\n      // so it will remove the old one and the new one will take its place.\n      if (_this._markers[index]) {\n        _this.removeMarkers([index]);\n      }\n      _this._markers[index] = {\n        _uid: uid,\n        config: config,\n        element: marker\n      };\n    },\n    _ret;\n  for (var index in markers) {\n    _ret = _loop();\n    if (_ret === 0) continue;\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Legend = /*#__PURE__*/function () {\n  function Legend(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this._options = options;\n    this._map = this._options.map;\n    this._series = this._options.series;\n    this._body = createElement('div', 'jvm-legend');\n    if (this._options.cssClass) {\n      this._body.setAttribute('class', this._options.cssClass);\n    }\n    if (options.vertical) {\n      this._map.legendVertical.appendChild(this._body);\n    } else {\n      this._map.legendHorizontal.appendChild(this._body);\n    }\n    this.render();\n  }\n  var _proto = Legend.prototype;\n  _proto.render = function render() {\n    var ticks = this._series.scale.getTicks();\n    var inner = createElement('div', 'jvm-legend-inner');\n    this._body.innderHTML = '';\n    if (this._options.title) {\n      var legendTitle = createElement('div', 'jvm-legend-title', this._options.title);\n      this._body.appendChild(legendTitle);\n    }\n    this._body.appendChild(inner);\n    for (var i = 0; i < ticks.length; i++) {\n      var tick = createElement('div', 'jvm-legend-tick');\n      var sample = createElement('div', 'jvm-legend-tick-sample');\n      switch (this._series.config.attribute) {\n        case 'fill':\n          if (isImageUrl(ticks[i].value)) {\n            sample.style.background = \"url(\" + ticks[i].value + \")\";\n          } else {\n            sample.style.background = ticks[i].value;\n          }\n          break;\n        case 'stroke':\n          sample.style.background = ticks[i].value;\n          break;\n        case 'image':\n          sample.style.background = \"url(\" + (typeof ticks[i].value === 'object' ? ticks[i].value.url : ticks[i].value) + \") no-repeat center center\";\n          sample.style.backgroundSize = 'cover';\n          break;\n      }\n      tick.appendChild(sample);\n      var label = ticks[i].label;\n      if (this._options.labelRender) {\n        label = this._options.labelRender(label);\n      }\n      var tickText = createElement('div', 'jvm-legend-tick-text', label);\n      tick.appendChild(tickText);\n      inner.appendChild(tick);\n    }\n  };\n  return Legend;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar OrdinalScale = /*#__PURE__*/function () {\n  function OrdinalScale(scale) {\n    this._scale = scale;\n  }\n  var _proto = OrdinalScale.prototype;\n  _proto.getValue = function getValue(value) {\n    return this._scale[value];\n  };\n  _proto.getTicks = function getTicks() {\n    var ticks = [];\n    for (var key in this._scale) {\n      ticks.push({\n        label: key,\n        value: this._scale[key]\n      });\n    }\n    return ticks;\n  };\n  return OrdinalScale;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Series = /*#__PURE__*/function () {\n  function Series(config, elements, map) {\n    if (config === void 0) {\n      config = {};\n    }\n    // Private\n    this._map = map;\n    this._elements = elements; // Could be markers or regions\n    this._values = config.values || {};\n\n    // Protected\n    this.config = config;\n    this.config.attribute = config.attribute || 'fill';\n\n    // Set initial attributes\n    if (config.attributes) {\n      this.setAttributes(config.attributes);\n    }\n    if (typeof config.scale === 'object') {\n      this.scale = new OrdinalScale(config.scale);\n    }\n    if (this.config.legend) {\n      this.legend = new Legend(merge({\n        map: this._map,\n        series: this\n      }, this.config.legend));\n    }\n    this.setValues(this._values);\n  }\n  var _proto = Series.prototype;\n  _proto.setValues = function setValues(values) {\n    var attrs = {};\n    for (var key in values) {\n      if (values[key]) {\n        attrs[key] = this.scale.getValue(values[key]);\n      }\n    }\n    this.setAttributes(attrs);\n  };\n  _proto.setAttributes = function setAttributes(attrs) {\n    for (var code in attrs) {\n      if (this._elements[code]) {\n        this._elements[code].element.setStyle(this.config.attribute, attrs[code]);\n      }\n    }\n  };\n  _proto.clear = function clear() {\n    var key,\n      attrs = {};\n    for (key in this._values) {\n      if (this._elements[key]) {\n        attrs[key] = this._elements[key].element.shape.style.initial[this.config.attribute];\n      }\n    }\n    this.setAttributes(attrs);\n    this._values = {};\n  };\n  return Series;\n}();\n\nfunction createSeries() {\n  this.series = {\n    markers: [],\n    regions: []\n  };\n  for (var key in this.params.series) {\n    for (var i = 0; i < this.params.series[key].length; i++) {\n      this.series[key][i] = new Series(this.params.series[key][i], key === 'markers' ? this._markers : this.regions, this);\n    }\n  }\n}\n\nfunction applyTransform() {\n  var maxTransX, maxTransY, minTransX, minTransY;\n  if (this._defaultWidth * this.scale <= this._width) {\n    maxTransX = (this._width - this._defaultWidth * this.scale) / (2 * this.scale);\n    minTransX = (this._width - this._defaultWidth * this.scale) / (2 * this.scale);\n  } else {\n    maxTransX = 0;\n    minTransX = (this._width - this._defaultWidth * this.scale) / this.scale;\n  }\n  if (this._defaultHeight * this.scale <= this._height) {\n    maxTransY = (this._height - this._defaultHeight * this.scale) / (2 * this.scale);\n    minTransY = (this._height - this._defaultHeight * this.scale) / (2 * this.scale);\n  } else {\n    maxTransY = 0;\n    minTransY = (this._height - this._defaultHeight * this.scale) / this.scale;\n  }\n  if (this.transY > maxTransY) {\n    this.transY = maxTransY;\n  } else if (this.transY < minTransY) {\n    this.transY = minTransY;\n  }\n  if (this.transX > maxTransX) {\n    this.transX = maxTransX;\n  } else if (this.transX < minTransX) {\n    this.transX = minTransX;\n  }\n  this.canvas.applyTransformParams(this.scale, this.transX, this.transY);\n  if (this._markers) {\n    this._repositionMarkers();\n  }\n  if (this._lines) {\n    this._repositionLines();\n  }\n  this._repositionLabels();\n}\n\nfunction resize() {\n  var curBaseScale = this._baseScale;\n  if (this._width / this._height > this._defaultWidth / this._defaultHeight) {\n    this._baseScale = this._height / this._defaultHeight;\n    this._baseTransX = Math.abs(this._width - this._defaultWidth * this._baseScale) / (2 * this._baseScale);\n  } else {\n    this._baseScale = this._width / this._defaultWidth;\n    this._baseTransY = Math.abs(this._height - this._defaultHeight * this._baseScale) / (2 * this._baseScale);\n  }\n  this.scale *= this._baseScale / curBaseScale;\n  this.transX *= this._baseScale / curBaseScale;\n  this.transY *= this._baseScale / curBaseScale;\n}\n\nfunction setScale(scale, anchorX, anchorY, isCentered, animate) {\n  var _this = this;\n  var zoomStep,\n    interval,\n    i = 0,\n    count = Math.abs(Math.round((scale - this.scale) * 60 / Math.max(scale, this.scale))),\n    scaleStart,\n    scaleDiff,\n    transXStart,\n    transXDiff,\n    transYStart,\n    transYDiff,\n    transX,\n    transY;\n  if (scale > this.params.zoomMax * this._baseScale) {\n    scale = this.params.zoomMax * this._baseScale;\n  } else if (scale < this.params.zoomMin * this._baseScale) {\n    scale = this.params.zoomMin * this._baseScale;\n  }\n  if (typeof anchorX != 'undefined' && typeof anchorY != 'undefined') {\n    zoomStep = scale / this.scale;\n    if (isCentered) {\n      transX = anchorX + this._defaultWidth * (this._width / (this._defaultWidth * scale)) / 2;\n      transY = anchorY + this._defaultHeight * (this._height / (this._defaultHeight * scale)) / 2;\n    } else {\n      transX = this.transX - (zoomStep - 1) / scale * anchorX;\n      transY = this.transY - (zoomStep - 1) / scale * anchorY;\n    }\n  }\n  if (animate && count > 0) {\n    scaleStart = this.scale;\n    scaleDiff = (scale - scaleStart) / count;\n    transXStart = this.transX * this.scale;\n    transYStart = this.transY * this.scale;\n    transXDiff = (transX * scale - transXStart) / count;\n    transYDiff = (transY * scale - transYStart) / count;\n    interval = setInterval(function () {\n      i += 1;\n      _this.scale = scaleStart + scaleDiff * i;\n      _this.transX = (transXStart + transXDiff * i) / _this.scale;\n      _this.transY = (transYStart + transYDiff * i) / _this.scale;\n      _this._applyTransform();\n      if (i == count) {\n        clearInterval(interval);\n        _this._emit(Events.onViewportChange, [_this.scale, _this.transX, _this.transY]);\n      }\n    }, 10);\n  } else {\n    this.transX = transX;\n    this.transY = transY;\n    this.scale = scale;\n    this._applyTransform();\n    this._emit(Events.onViewportChange, [this.scale, this.transX, this.transY]);\n  }\n}\n\nfunction setFocus(config) {\n  var _this = this;\n  if (config === void 0) {\n    config = {};\n  }\n  var bbox,\n    codes = [];\n  if (config.region) {\n    codes.push(config.region);\n  } else if (config.regions) {\n    codes = config.regions;\n  }\n  if (codes.length) {\n    codes.forEach(function (code) {\n      if (_this.regions[code]) {\n        var itemBbox = _this.regions[code].element.shape.getBBox();\n        if (itemBbox) {\n          // Handle the first loop\n          if (typeof bbox == 'undefined') {\n            bbox = itemBbox;\n          } else {\n            // get the old bbox properties plus the current\n            // this kinda incrementing the old values and the new values\n            bbox = {\n              x: Math.min(bbox.x, itemBbox.x),\n              y: Math.min(bbox.y, itemBbox.y),\n              width: Math.max(bbox.x + bbox.width, itemBbox.x + itemBbox.width) - Math.min(bbox.x, itemBbox.x),\n              height: Math.max(bbox.y + bbox.height, itemBbox.y + itemBbox.height) - Math.min(bbox.y, itemBbox.y)\n            };\n          }\n        }\n      }\n    });\n    return this._setScale(Math.min(this._width / bbox.width, this._height / bbox.height), -(bbox.x + bbox.width / 2), -(bbox.y + bbox.height / 2), true, config.animate);\n  } else if (config.coords) {\n    var point = this.coordsToPoint(config.coords[0], config.coords[1]);\n    var x = this.transX - point.x / this.scale;\n    var y = this.transY - point.y / this.scale;\n    return this._setScale(config.scale * this._baseScale, x, y, true, config.animate);\n  }\n}\n\nfunction updateSize() {\n  this._width = this.container.offsetWidth;\n  this._height = this.container.offsetHeight;\n  this._resize();\n  this.canvas.setSize(this._width, this._height);\n  this._applyTransform();\n}\n\n/**\n * ------------------------------------------------------------------------\n * Object\n * ------------------------------------------------------------------------\n */\nvar Proj = {\n  /* sgn(n){\n    if (n > 0) {\n      return 1;\n    } else if (n < 0) {\n      return -1;\n    } else {\n      return n;\n    }\n  }, */\n  mill: function mill(lat, lng, c) {\n    return {\n      x: this.radius * (lng - c) * this.radDeg,\n      y: -this.radius * Math.log(Math.tan((45 + 0.4 * lat) * this.radDeg)) / 0.8\n    };\n  },\n  /* mill_inv(x, y, c) {\n    return {\n      lat: (2.5 * Math.atan(Math.exp(0.8 * y / this.radius)) - 5 * Math.PI / 8) * this.degRad,\n      lng: (c * this.radDeg + x / this.radius) * this.degRad\n    };\n  }, */\n  merc: function merc(lat, lng, c) {\n    return {\n      x: this.radius * (lng - c) * this.radDeg,\n      y: -this.radius * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360))\n    };\n  },\n  /* merc_inv(x, y, c) {\n    return {\n      lat: (2 * Math.atan(Math.exp(y / this.radius)) - Math.PI / 2) * this.degRad,\n      lng: (c * this.radDeg + x / this.radius) * this.degRad\n    };\n  }, */\n  aea: function aea(lat, lng, c) {\n    var fi0 = 0,\n      lambda0 = c * this.radDeg,\n      fi1 = 29.5 * this.radDeg,\n      fi2 = 45.5 * this.radDeg,\n      fi = lat * this.radDeg,\n      lambda = lng * this.radDeg,\n      n = (Math.sin(fi1) + Math.sin(fi2)) / 2,\n      C = Math.cos(fi1) * Math.cos(fi1) + 2 * n * Math.sin(fi1),\n      theta = n * (lambda - lambda0),\n      ro = Math.sqrt(C - 2 * n * Math.sin(fi)) / n,\n      ro0 = Math.sqrt(C - 2 * n * Math.sin(fi0)) / n;\n    return {\n      x: ro * Math.sin(theta) * this.radius,\n      y: -(ro0 - ro * Math.cos(theta)) * this.radius\n    };\n  },\n  /* aea_inv(xCoord, yCoord, c) {\n    var x = xCoord / this.radius,\n        y = yCoord / this.radius,\n        fi0 = 0,\n        lambda0 = c * this.radDeg,\n        fi1 = 29.5 * this.radDeg,\n        fi2 = 45.5 * this.radDeg,\n        n = (Math.sin(fi1)+Math.sin(fi2)) / 2,\n        C = Math.cos(fi1)*Math.cos(fi1)+2*n*Math.sin(fi1),\n        ro0 = Math.sqrt(C-2*n*Math.sin(fi0))/n,\n        ro = Math.sqrt(x*x+(ro0-y)*(ro0-y)),\n        theta = Math.atan( x / (ro0 - y) );\n     return {\n      lat: (Math.asin((C - ro * ro * n * n) / (2 * n))) * this.degRad,\n      lng: (lambda0 + theta / n) * this.degRad\n    };\n  }, */\n  lcc: function lcc(lat, lng, c) {\n    var fi0 = 0,\n      lambda0 = c * this.radDeg,\n      lambda = lng * this.radDeg,\n      fi1 = 33 * this.radDeg,\n      fi2 = 45 * this.radDeg,\n      fi = lat * this.radDeg,\n      n = Math.log(Math.cos(fi1) * (1 / Math.cos(fi2))) / Math.log(Math.tan(Math.PI / 4 + fi2 / 2) * (1 / Math.tan(Math.PI / 4 + fi1 / 2))),\n      F = Math.cos(fi1) * Math.pow(Math.tan(Math.PI / 4 + fi1 / 2), n) / n,\n      ro = F * Math.pow(1 / Math.tan(Math.PI / 4 + fi / 2), n),\n      ro0 = F * Math.pow(1 / Math.tan(Math.PI / 4 + fi0 / 2), n);\n    return {\n      x: ro * Math.sin(n * (lambda - lambda0)) * this.radius,\n      y: -(ro0 - ro * Math.cos(n * (lambda - lambda0))) * this.radius\n    };\n  }\n  /* lcc_inv(xCoord, yCoord, c) {\n    var x = xCoord / this.radius,\n        y = yCoord / this.radius,\n        fi0 = 0,\n        lambda0 = c * this.radDeg,\n        fi1 = 33 * this.radDeg,\n        fi2 = 45 * this.radDeg,\n        n = Math.log( Math.cos(fi1) * (1 / Math.cos(fi2)) ) / Math.log( Math.tan( Math.PI / 4 + fi2 / 2) * (1 / Math.tan( Math.PI / 4 + fi1 / 2) ) ),\n        F = ( Math.cos(fi1) * Math.pow( Math.tan( Math.PI / 4 + fi1 / 2 ), n ) ) / n,\n        ro0 = F * Math.pow( 1 / Math.tan( Math.PI / 4 + fi0 / 2 ), n ),\n        ro = this.sgn(n) * Math.sqrt(x*x+(ro0-y)*(ro0-y)),\n        theta = Math.atan( x / (ro0 - y) );\n     return {\n      lat: (2 * Math.atan(Math.pow(F/ro, 1/n)) - Math.PI / 2) * this.degRad,\n      lng: (lambda0 + theta / n) * this.degRad\n    };\n  } */\n};\nProj.degRad = 180 / Math.PI;\nProj.radDeg = Math.PI / 180;\nProj.radius = 6381372;\n\nfunction coordsToPoint(lat, lng) {\n  var projection = Map.maps[this.params.map].projection;\n  var _Proj$projection$type = Proj[projection.type](lat, lng, projection.centralMeridian),\n    x = _Proj$projection$type.x,\n    y = _Proj$projection$type.y;\n  var inset = this.getInsetForPoint(x, y);\n  if (!inset) {\n    return false;\n  }\n  var bbox = inset.bbox;\n  x = (x - bbox[0].x) / (bbox[1].x - bbox[0].x) * inset.width * this.scale;\n  y = (y - bbox[0].y) / (bbox[1].y - bbox[0].y) * inset.height * this.scale;\n  return {\n    x: x + this.transX * this.scale + inset.left * this.scale,\n    y: y + this.transY * this.scale + inset.top * this.scale\n  };\n}\n\nfunction getInsetForPoint(x, y) {\n  var insets = Map.maps[this.params.map].insets;\n  for (var index = 0; index < insets.length; index++) {\n    var _insets$index$bbox = insets[index].bbox,\n      start = _insets$index$bbox[0],\n      end = _insets$index$bbox[1];\n    if (x > start.x && x < end.x && y > start.y && y < end.y) {\n      return insets[index];\n    }\n  }\n}\n\nfunction getMarkerPosition(_ref) {\n  var coords = _ref.coords;\n  if (Map.maps[this.params.map].projection) {\n    return this.coordsToPoint.apply(this, coords);\n  }\n  return {\n    x: coords[0] * this.scale + this.transX * this.scale,\n    y: coords[1] * this.scale + this.transY * this.scale\n  };\n}\n\nfunction repositionLines() {\n  var point1 = false,\n    point2 = false;\n  for (var index in this._lines) {\n    for (var mindex in this._markers) {\n      var marker = this._markers[mindex];\n      if (marker.config.name === this._lines[index].config.from) {\n        point1 = this.getMarkerPosition(marker.config);\n      }\n      if (marker.config.name === this._lines[index].config.to) {\n        point2 = this.getMarkerPosition(marker.config);\n      }\n    }\n    if (point1 !== false && point2 !== false) {\n      this._lines[index].setStyle({\n        x1: point1.x,\n        y1: point1.y,\n        x2: point2.x,\n        y2: point2.y\n      });\n    }\n  }\n}\n\nfunction repositionMarkers() {\n  for (var index in this._markers) {\n    var point = this.getMarkerPosition(this._markers[index].config);\n    if (point !== false) {\n      this._markers[index].element.setStyle({\n        cx: point.x,\n        cy: point.y\n      });\n    }\n  }\n}\n\nfunction repositionLabels() {\n  var labels = this.params.labels;\n  if (!labels) {\n    return;\n  }\n\n  // Regions labels\n  if (labels.regions) {\n    for (var key in this.regions) {\n      this.regions[key].element.updateLabelPosition();\n    }\n  }\n\n  // Markers labels\n  if (labels.markers) {\n    for (var _key in this._markers) {\n      this._markers[_key].element.updateLabelPosition();\n    }\n  }\n}\n\nvar core = {\n  _setupContainerEvents: setupContainerEvents,\n  _setupElementEvents: setupElementEvents,\n  _setupZoomButtons: setupZoomButtons,\n  _setupContainerTouchEvents: setupContainerTouchEvents,\n  _createRegions: createRegions,\n  _createLines: createLines,\n  _createMarkers: createMarkers,\n  _createSeries: createSeries,\n  _applyTransform: applyTransform,\n  _resize: resize,\n  _setScale: setScale,\n  setFocus: setFocus,\n  updateSize: updateSize,\n  coordsToPoint: coordsToPoint,\n  getInsetForPoint: getInsetForPoint,\n  getMarkerPosition: getMarkerPosition,\n  _repositionLines: repositionLines,\n  _repositionMarkers: repositionMarkers,\n  _repositionLabels: repositionLabels\n};\n\nvar Defaults = {\n  map: 'world',\n  backgroundColor: 'transparent',\n  draggable: true,\n  zoomButtons: true,\n  zoomOnScroll: true,\n  zoomOnScrollSpeed: 3,\n  zoomMax: 12,\n  zoomMin: 1,\n  zoomAnimate: true,\n  showTooltip: true,\n  zoomStep: 1.5,\n  bindTouchEvents: true,\n  // Line options\n  lineStyle: {\n    stroke: '#808080',\n    strokeWidth: 1,\n    strokeLinecap: 'round'\n  },\n  // Marker options\n  markersSelectable: false,\n  markersSelectableOne: false,\n  markerStyle: {\n    initial: {\n      r: 7,\n      fill: '#374151',\n      fillOpacity: 1,\n      stroke: '#FFF',\n      strokeWidth: 5,\n      strokeOpacity: .5\n    },\n    hover: {\n      fill: '#3cc0ff',\n      cursor: 'pointer'\n    },\n    selected: {\n      fill: 'blue'\n    },\n    selectedHover: {}\n  },\n  markerLabelStyle: {\n    initial: {\n      fontFamily: 'Verdana',\n      fontSize: 12,\n      fontWeight: 500,\n      cursor: 'default',\n      fill: '#374151'\n    },\n    hover: {\n      cursor: 'pointer'\n    },\n    selected: {},\n    selectedHover: {}\n  },\n  // Region options\n  regionsSelectable: false,\n  regionsSelectableOne: false,\n  regionStyle: {\n    initial: {\n      fill: '#dee2e8',\n      fillOpacity: 1,\n      stroke: 'none',\n      strokeWidth: 0\n    },\n    hover: {\n      fillOpacity: .7,\n      cursor: 'pointer'\n    },\n    selected: {\n      fill: '#9ca3af'\n    },\n    selectedHover: {}\n  },\n  regionLabelStyle: {\n    initial: {\n      fontFamily: 'Verdana',\n      fontSize: '12',\n      fontWeight: 'bold',\n      cursor: 'default',\n      fill: '#35373e'\n    },\n    hover: {\n      cursor: 'pointer'\n    }\n  }\n};\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGElement = /*#__PURE__*/function () {\n  function SVGElement(name, config) {\n    this.node = this._createElement(name);\n    if (config) {\n      this.set(config);\n    }\n  }\n\n  // Create new SVG element `svg`, `g`, `path`, `line`, `circle`, `image`, etc.\n  // https://developer.mozilla.org/en-US/docs/Web/API/Document/createElementNS#important_namespace_uris\n  var _proto = SVGElement.prototype;\n  _proto._createElement = function _createElement(tagName) {\n    return document.createElementNS('http://www.w3.org/2000/svg', tagName);\n  };\n  _proto.addClass = function addClass(className) {\n    this.node.setAttribute('class', className);\n  };\n  _proto.getBBox = function getBBox() {\n    return this.node.getBBox();\n  }\n\n  // Apply attributes on the current node element\n  ;\n  _proto.set = function set(property, value) {\n    if (typeof property === 'object') {\n      for (var attr in property) {\n        this.applyAttr(attr, property[attr]);\n      }\n    } else {\n      this.applyAttr(property, value);\n    }\n  };\n  _proto.get = function get(property) {\n    return this.style.initial[property];\n  };\n  _proto.applyAttr = function applyAttr(property, value) {\n    this.node.setAttribute(hyphenate(property), value);\n  };\n  _proto.remove = function remove() {\n    removeElement(this.node);\n  };\n  return SVGElement;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGShapeElement = /*#__PURE__*/function (_SVGElement) {\n  function SVGShapeElement(name, config, style) {\n    var _this;\n    if (style === void 0) {\n      style = {};\n    }\n    _this = _SVGElement.call(this, name, config) || this;\n    _this.isHovered = false;\n    _this.isSelected = false;\n    _this.style = style;\n    _this.style.current = {};\n    _this.updateStyle();\n    return _this;\n  }\n  _inheritsLoose(SVGShapeElement, _SVGElement);\n  var _proto = SVGShapeElement.prototype;\n  _proto.setStyle = function setStyle(property, value) {\n    if (typeof property === 'object') {\n      merge(this.style.current, property);\n    } else {\n      var _merge;\n      merge(this.style.current, (_merge = {}, _merge[property] = value, _merge));\n    }\n    this.updateStyle();\n  };\n  _proto.updateStyle = function updateStyle() {\n    var attrs = {};\n    merge(attrs, this.style.initial);\n    merge(attrs, this.style.current);\n    if (this.isHovered) {\n      merge(attrs, this.style.hover);\n    }\n    if (this.isSelected) {\n      merge(attrs, this.style.selected);\n      if (this.isHovered) {\n        merge(attrs, this.style.selectedHover);\n      }\n    }\n    this.set(attrs);\n  };\n  return SVGShapeElement;\n}(SVGElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGTextElement = /*#__PURE__*/function (_SVGShapeElement) {\n  function SVGTextElement(config, style) {\n    return _SVGShapeElement.call(this, 'text', config, style) || this;\n  }\n  _inheritsLoose(SVGTextElement, _SVGShapeElement);\n  var _proto = SVGTextElement.prototype;\n  _proto.applyAttr = function applyAttr(attr, value) {\n    attr === 'text' ? this.node.textContent = value : _SVGShapeElement.prototype.applyAttr.call(this, attr, value);\n  };\n  return SVGTextElement;\n}(SVGShapeElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGImageElement = /*#__PURE__*/function (_SVGShapeElement) {\n  function SVGImageElement(config, style) {\n    return _SVGShapeElement.call(this, 'image', config, style) || this;\n  }\n  _inheritsLoose(SVGImageElement, _SVGShapeElement);\n  var _proto = SVGImageElement.prototype;\n  _proto.applyAttr = function applyAttr(attr, value) {\n    var imageUrl;\n    if (attr === 'image') {\n      // This get executed when we have url in series.markers[0].scale.someScale.url\n      if (typeof value === 'object') {\n        imageUrl = value.url;\n        this.offset = value.offset || [0, 0];\n      } else {\n        imageUrl = value;\n        this.offset = [0, 0];\n      }\n      this.node.setAttributeNS('http://www.w3.org/1999/xlink', 'href', imageUrl);\n\n      // Set width and height then call this `applyAttr` again\n      this.width = 23;\n      this.height = 23;\n      this.applyAttr('width', this.width);\n      this.applyAttr('height', this.height);\n      this.applyAttr('x', this.cx - this.width / 2 + this.offset[0]);\n      this.applyAttr('y', this.cy - this.height / 2 + this.offset[1]);\n    } else if (attr == 'cx') {\n      this.cx = value;\n      if (this.width) {\n        this.applyAttr('x', value - this.width / 2 + this.offset[0]);\n      }\n    } else if (attr == 'cy') {\n      this.cy = value;\n      if (this.height) {\n        this.applyAttr('y', value - this.height / 2 + this.offset[1]);\n      }\n    } else {\n      // This time Call SVGElement\n      _SVGShapeElement.prototype.applyAttr.apply(this, arguments);\n    }\n  };\n  return SVGImageElement;\n}(SVGShapeElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar SVGCanvasElement = /*#__PURE__*/function (_SVGElement) {\n  function SVGCanvasElement(container) {\n    var _this;\n    _this = _SVGElement.call(this, 'svg') || this; // Create svg element for holding the whole map\n\n    _this._container = container;\n\n    // Create the defs element\n    _this._defsElement = new SVGElement('defs');\n\n    // Create group element which will hold the paths (regions)\n    _this._rootElement = new SVGElement('g', {\n      id: 'jvm-regions-group'\n    });\n\n    // Append the defs element to the this.node (SVG tag)\n    _this.node.appendChild(_this._defsElement.node);\n\n    // Append the group to this.node (SVG tag)\n    _this.node.appendChild(_this._rootElement.node);\n\n    // Append this.node (SVG tag) to the container\n    _this._container.appendChild(_this.node);\n    return _this;\n  }\n  _inheritsLoose(SVGCanvasElement, _SVGElement);\n  var _proto = SVGCanvasElement.prototype;\n  _proto.setSize = function setSize(width, height) {\n    this.node.setAttribute('width', width);\n    this.node.setAttribute('height', height);\n  };\n  _proto.applyTransformParams = function applyTransformParams(scale, transX, transY) {\n    this._rootElement.node.setAttribute('transform', \"scale(\" + scale + \") translate(\" + transX + \", \" + transY + \")\");\n  }\n\n  // Create `path` element\n  ;\n  _proto.createPath = function createPath(config, style) {\n    var path = new SVGShapeElement('path', config, style);\n    path.node.setAttribute('fill-rule', 'evenodd');\n    return this._add(path);\n  }\n\n  // Create `circle` element\n  ;\n  _proto.createCircle = function createCircle(config, style, group) {\n    var circle = new SVGShapeElement('circle', config, style);\n    return this._add(circle, group);\n  }\n\n  // Create `line` element\n  ;\n  _proto.createLine = function createLine(config, style, group) {\n    var line = new SVGShapeElement('line', config, style);\n    return this._add(line, group);\n  }\n\n  // Create `text` element\n  ;\n  _proto.createText = function createText(config, style, group) {\n    var text = new SVGTextElement(config, style);\n    return this._add(text, group);\n  }\n\n  // Create `image` element\n  ;\n  _proto.createImage = function createImage(config, style, group) {\n    var image = new SVGImageElement(config, style);\n    return this._add(image, group);\n  }\n\n  // Create `g` element\n  ;\n  _proto.createGroup = function createGroup(id) {\n    var group = new SVGElement('g');\n    this.node.appendChild(group.node);\n    if (id) {\n      group.node.id = id;\n    }\n    group.canvas = this;\n    return group;\n  }\n\n  // Add some element to a spcific group or the root element if the group isn't given\n  ;\n  _proto._add = function _add(element, group) {\n    group = group || this._rootElement;\n    group.node.appendChild(element.node);\n    return element;\n  };\n  return SVGCanvasElement;\n}(SVGElement);\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Tooltip = /*#__PURE__*/function (_BaseComponent) {\n  function Tooltip(map) {\n    var _this;\n    _this = _BaseComponent.call(this) || this;\n    var tooltip = createElement('div', 'jvm-tooltip');\n    _this._map = map;\n    _this._tooltip = document.body.appendChild(tooltip);\n    _this._bindEventListeners();\n    return _this || _assertThisInitialized(_this);\n  }\n  _inheritsLoose(Tooltip, _BaseComponent);\n  var _proto = Tooltip.prototype;\n  _proto._bindEventListeners = function _bindEventListeners() {\n    var _this2 = this;\n    EventHandler.on(this._map.container, 'mousemove', function (event) {\n      if (!_this2._tooltip.classList.contains('active')) {\n        return;\n      }\n      var container = findElement(_this2._map.container, '#jvm-regions-group').getBoundingClientRect();\n      var space = 5; // Space between the cursor and tooltip element\n\n      // Tooltip\n      var _this2$_tooltip$getBo = _this2._tooltip.getBoundingClientRect(),\n        height = _this2$_tooltip$getBo.height,\n        width = _this2$_tooltip$getBo.width;\n      var topIsPassed = event.clientY <= container.top + height + space;\n      var top = event.pageY - height - space;\n      var left = event.pageX - width - space;\n\n      // Ensure the tooltip will never cross outside the canvas area(map)\n      if (topIsPassed) {\n        // Top:\n        top += height + space;\n\n        // The cursor is a bit larger from left side\n        left -= space * 2;\n      }\n      if (event.clientX < container.left + width + space) {\n        // Left:\n        left = event.pageX + space + 2;\n        if (topIsPassed) {\n          left += space * 2;\n        }\n      }\n      _this2.css({\n        top: top + \"px\",\n        left: left + \"px\"\n      });\n    });\n  };\n  _proto.getElement = function getElement() {\n    return this._tooltip;\n  };\n  _proto.show = function show() {\n    this._tooltip.classList.add('active');\n  };\n  _proto.hide = function hide() {\n    this._tooltip.classList.remove('active');\n  };\n  _proto.text = function text(string, html) {\n    if (html === void 0) {\n      html = false;\n    }\n    var property = html ? 'innerHTML' : 'textContent';\n    if (!string) {\n      return this._tooltip[property];\n    }\n    this._tooltip[property] = string;\n  };\n  _proto.css = function css(_css) {\n    for (var style in _css) {\n      this._tooltip.style[style] = _css[style];\n    }\n    return this;\n  };\n  return Tooltip;\n}(BaseComponent);\n\nvar DataVisualization = /*#__PURE__*/function () {\n  function DataVisualization(_ref, map) {\n    var scale = _ref.scale,\n      values = _ref.values;\n    this._scale = scale;\n    this._values = values;\n    this._fromColor = this.hexToRgb(scale[0]);\n    this._toColor = this.hexToRgb(scale[1]);\n    this._map = map;\n    this.setMinMaxValues(values);\n    this.visualize();\n  }\n  var _proto = DataVisualization.prototype;\n  _proto.setMinMaxValues = function setMinMaxValues(values) {\n    this.min = Number.MAX_VALUE;\n    this.max = 0;\n    for (var value in values) {\n      value = parseFloat(values[value]);\n      if (value > this.max) {\n        this.max = value;\n      }\n      if (value < this.min) {\n        this.min = value;\n      }\n    }\n  };\n  _proto.visualize = function visualize() {\n    var attrs = {},\n      value;\n    for (var regionCode in this._values) {\n      value = parseFloat(this._values[regionCode]);\n      if (!isNaN(value)) {\n        attrs[regionCode] = this.getValue(value);\n      }\n    }\n    this.setAttributes(attrs);\n  };\n  _proto.setAttributes = function setAttributes(attrs) {\n    for (var code in attrs) {\n      if (this._map.regions[code]) {\n        this._map.regions[code].element.setStyle('fill', attrs[code]);\n      }\n    }\n  };\n  _proto.getValue = function getValue(value) {\n    if (this.min === this.max) {\n      return \"#\" + this._toColor.join('');\n    }\n    var hex,\n      color = '#';\n    for (var i = 0; i < 3; i++) {\n      hex = Math.round(this._fromColor[i] + (this._toColor[i] - this._fromColor[i]) * ((value - this.min) / (this.max - this.min))).toString(16);\n      color += (hex.length === 1 ? '0' : '') + hex;\n    }\n    return color;\n  };\n  _proto.hexToRgb = function hexToRgb(h) {\n    var r = 0,\n      g = 0,\n      b = 0;\n    if (h.length == 4) {\n      r = '0x' + h[1] + h[1];\n      g = '0x' + h[2] + h[2];\n      b = '0x' + h[3] + h[3];\n    } else if (h.length == 7) {\n      r = '0x' + h[1] + h[2];\n      g = '0x' + h[3] + h[4];\n      b = '0x' + h[5] + h[6];\n    }\n    return [parseInt(r), parseInt(g), parseInt(b)];\n  };\n  return DataVisualization;\n}();\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar Map = /*#__PURE__*/function () {\n  function Map(options) {\n    var _this = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // Merge the given options with the default options\n    this.params = merge(Map.defaults, options, true);\n\n    // Throw an error if the given map name doesn't match\n    // the map that was set in map file\n    if (!Map.maps[this.params.map]) {\n      throw new Error(\"Attempt to use map which was not loaded: \" + options.map);\n    }\n    this.regions = {};\n    this.scale = 1;\n    this.transX = 0;\n    this.transY = 0;\n    this._mapData = Map.maps[this.params.map];\n    this._markers = {};\n    this._lines = {};\n    this._defaultWidth = this._mapData.width;\n    this._defaultHeight = this._mapData.height;\n    this._height = 0;\n    this._width = 0;\n    this._baseScale = 1;\n    this._baseTransX = 0;\n    this._baseTransY = 0;\n\n    // `document` is already ready, just initialise now\n    if (document.readyState !== 'loading') {\n      this._init();\n    } else {\n      // Wait until `document` is ready\n      window.addEventListener('DOMContentLoaded', function () {\n        return _this._init();\n      });\n    }\n  }\n  var _proto = Map.prototype;\n  _proto._init = function _init() {\n    var options = this.params;\n    this.container = getElement(options.selector);\n    this.container.classList.add('jvm-container');\n\n    // The map canvas element\n    this.canvas = new SVGCanvasElement(this.container);\n\n    // Set the map's background color\n    this.setBackgroundColor(options.backgroundColor);\n\n    // Create regions\n    this._createRegions();\n\n    // Update size\n    this.updateSize();\n\n    // Create lines\n    this._createLines(options.lines || {}, options.markers || {});\n\n    // Create markers\n    this._createMarkers(options.markers);\n\n    // Position labels\n    this._repositionLabels();\n\n    // Setup the container events\n    this._setupContainerEvents();\n\n    // Setup regions/markers events\n    this._setupElementEvents();\n\n    // Create zoom buttons if `zoomButtons` is presented\n    if (options.zoomButtons) {\n      this._setupZoomButtons();\n    }\n\n    // Create toolip\n    if (options.showTooltip) {\n      this._tooltip = new Tooltip(this);\n    }\n\n    // Set selected regions if any\n    if (options.selectedRegions) {\n      this._setSelected('regions', options.selectedRegions);\n    }\n\n    // Set selected regions if any\n    if (options.selectedMarkers) {\n      this._setSelected('_markers', options.selectedMarkers);\n    }\n\n    // Set focus on a spcific region\n    if (options.focusOn) {\n      this.setFocus(options.focusOn);\n    }\n\n    // Data visualization\n    if (options.visualizeData) {\n      this.dataVisualization = new DataVisualization(options.visualizeData, this);\n    }\n\n    // Bind touch events if true\n    if (options.bindTouchEvents) {\n      if ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch) {\n        this._setupContainerTouchEvents();\n      }\n    }\n\n    // Create series if any\n    if (options.series) {\n      this.container.appendChild(this.legendHorizontal = createElement('div', 'jvm-series-container jvm-series-h'));\n      this.container.appendChild(this.legendVertical = createElement('div', 'jvm-series-container jvm-series-v'));\n      this._createSeries();\n    }\n\n    // Fire loaded event\n    this._emit(Events.onLoaded, [this]);\n  }\n\n  // Public\n  ;\n  _proto.setBackgroundColor = function setBackgroundColor(color) {\n    this.container.style.backgroundColor = color;\n  }\n\n  // Region methods\n  ;\n  _proto.getSelectedRegions = function getSelectedRegions() {\n    return this._getSelected('regions');\n  };\n  _proto.clearSelectedRegions = function clearSelectedRegions(regions) {\n    var _this2 = this;\n    if (regions === void 0) {\n      regions = undefined;\n    }\n    regions = this._normalizeRegions(regions) || this._getSelected('regions');\n    regions.forEach(function (key) {\n      _this2.regions[key].element.select(false);\n    });\n  };\n  _proto.setSelectedRegions = function setSelectedRegions(regions) {\n    this.clearSelectedRegions();\n    this._setSelected('regions', this._normalizeRegions(regions));\n  }\n\n  // Markers methods\n  ;\n  _proto.getSelectedMarkers = function getSelectedMarkers() {\n    return this._getSelected('_markers');\n  };\n  _proto.clearSelectedMarkers = function clearSelectedMarkers() {\n    this._clearSelected('_markers');\n  };\n  _proto.addMarkers = function addMarkers(config) {\n    config = Array.isArray(config) ? config : [config];\n    this._createMarkers(config, true);\n  };\n  _proto.removeMarkers = function removeMarkers(markers) {\n    var _this3 = this;\n    if (!markers) {\n      markers = Object.keys(this._markers);\n    }\n    markers.forEach(function (index) {\n      // Remove the element from the DOM\n      _this3._markers[index].element.remove();\n      // Remove the element from markers object\n      delete _this3._markers[index];\n    });\n  };\n  _proto.addLine = function addLine(from, to, style) {\n    if (style === void 0) {\n      style = {};\n    }\n    console.warn('`addLine` method is deprecated, please use `addLines` instead.');\n    this._createLines([{\n      from: from,\n      to: to,\n      style: style\n    }], this._markers, true);\n  };\n  _proto.addLines = function addLines(config) {\n    var uids = this._getLinesAsUids();\n    if (!Array.isArray(config)) {\n      config = [config];\n    }\n    this._createLines(config.filter(function (line) {\n      return !(uids.indexOf(getLineUid(line.from, line.to)) > -1);\n    }), this._markers, true);\n  };\n  _proto.removeLines = function removeLines(lines) {\n    var _this4 = this;\n    if (Array.isArray(lines)) {\n      lines = lines.map(function (line) {\n        return getLineUid(line.from, line.to);\n      });\n    } else {\n      lines = this._getLinesAsUids();\n    }\n    lines.forEach(function (uid) {\n      _this4._lines[uid].dispose();\n      delete _this4._lines[uid];\n    });\n  };\n  _proto.removeLine = function removeLine(from, to) {\n    console.warn('`removeLine` method is deprecated, please use `removeLines` instead.');\n    var uid = getLineUid(from, to);\n    if (this._lines.hasOwnProperty(uid)) {\n      this._lines[uid].element.remove();\n      delete this._lines[uid];\n    }\n  }\n\n  // Reset map\n  ;\n  _proto.reset = function reset() {\n    for (var key in this.series) {\n      for (var i = 0; i < this.series[key].length; i++) {\n        this.series[key][i].clear();\n      }\n    }\n    if (this.legendHorizontal) {\n      removeElement(this.legendHorizontal);\n      this.legendHorizontal = null;\n    }\n    if (this.legendVertical) {\n      removeElement(this.legendVertical);\n      this.legendVertical = null;\n    }\n    this.scale = this._baseScale;\n    this.transX = this._baseTransX;\n    this.transY = this._baseTransY;\n    this._applyTransform();\n    this.clearSelectedMarkers();\n    this.clearSelectedRegions();\n    this.removeMarkers();\n  }\n\n  // Destroy the map\n  ;\n  _proto.destroy = function destroy(destroyInstance) {\n    var _this5 = this;\n    if (destroyInstance === void 0) {\n      destroyInstance = true;\n    }\n    // Remove event registry\n    EventHandler.flush();\n\n    // Remove tooltip from DOM and memory\n    this._tooltip.dispose();\n\n    // Fire destroyed event\n    this._emit(Events.onDestroyed);\n\n    // Remove references\n    if (destroyInstance) {\n      Object.keys(this).forEach(function (key) {\n        try {\n          delete _this5[key];\n        } catch (e) {}\n      });\n    }\n  };\n  _proto.extend = function extend(name, callback) {\n    if (typeof this[name] === 'function') {\n      throw new Error(\"The method [\" + name + \"] does already exist, please use another name.\");\n    }\n    Map.prototype[name] = callback;\n  }\n\n  // Private\n  ;\n  _proto._emit = function _emit(eventName, args) {\n    for (var event in Events) {\n      if (Events[event] === eventName && typeof this.params[event] === 'function') {\n        this.params[event].apply(this, args);\n      }\n    }\n  }\n\n  // Get selected markers/regions\n  ;\n  _proto._getSelected = function _getSelected(type) {\n    var selected = [];\n    for (var key in this[type]) {\n      if (this[type][key].element.isSelected) {\n        selected.push(key);\n      }\n    }\n    return selected;\n  };\n  _proto._setSelected = function _setSelected(type, keys) {\n    var _this6 = this;\n    keys.forEach(function (key) {\n      if (_this6[type][key]) {\n        _this6[type][key].element.select(true);\n      }\n    });\n  };\n  _proto._clearSelected = function _clearSelected(type) {\n    var _this7 = this;\n    this._getSelected(type).forEach(function (key) {\n      _this7[type][key].element.select(false);\n    });\n  };\n  _proto._getLinesAsUids = function _getLinesAsUids() {\n    return Object.keys(this._lines);\n  };\n  _proto._normalizeRegions = function _normalizeRegions(regions) {\n    return typeof regions === 'string' ? [regions] : regions;\n  };\n  return Map;\n}();\nMap.maps = {};\nMap.defaults = Defaults;\nObject.assign(Map.prototype, core);\n\n/**\n * jsVectorMap\n * Copyrights (c) Mustafa Omar https://github.com/themustafaomar\n * Released under the MIT License.\n */\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\nvar jsVectorMap = /*#__PURE__*/function () {\n  function jsVectorMap(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (!options.selector) {\n      throw new Error('Selector is not given.');\n    }\n    return new Map(options);\n  }\n\n  // Public\n  jsVectorMap.addMap = function addMap(name, map) {\n    Map.maps[name] = map;\n  };\n  return jsVectorMap;\n}();\nvar index = window.jsVectorMap = jsVectorMap;\n\nexport { index as default };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}